<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width" charset="utf-8"><title>PhysicsJS Documentation</title><!-- Foundation CSS--><link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/css/foundation.min.css"><!-- Prism CSS--><style type="text/css">/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0,0%,100%,.5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}


.token.regex,
.token.important {
	color: #e90;
}

.token.important {
	font-weight: bold;
}

.token.entity {
	cursor: help;
}
</style><!-- Custom Styles--><style type="text/css">h1.page-title small {
  font-weight: 400;
}
/*.section-container, .section-container .section .title
  border-color #e6e6e6*/
#nav .section.active {
  padding-top: 0 !important;
}
#nav .section.active .title {
  background: #ddd;
}
#nav .section .title {
  background-color: #eee;
}
#nav .section .title a {
  font-weight: 700;
  padding: 0.6em;
}
#nav .section .title a small {
  font-size: 0.8em;
  line-height: 1em;
  display: block;
  color: #888;
  margin: 2px 0 -2px;
}
#nav .section .title:hover {
  background: #ddd;
}
#nav ul.solo {
  border-top: 1px solid #ccc;
  padding: 0.875em;
}
code {
  background: transparent;
  line-height: 1.3em;
  font-weight: normal;
}
.comment {
  position: relative;
  padding-bottom: 1.5em;
  margin-bottom: 2em;
  border-bottom: 1px solid #ddd;
}
.comment ol,
.comment ul {
  margin-left: 2.25em;
}
.comment ol.no-bullet,
.comment ul.no-bullet {
  margin-left: 0;
}
.comment header {
  margin-bottom: 1.5em;
}
.comment header h1 {
  font-size: 2rem;
  margin-bottom: 0.2em;
}
.comment .section-container,
.comment .section-container > .section > .content {
  border: none;
}
.comment .section-container > .section > .title {
  padding: auto;
  background: none !important;
  border: none !important;
}
.comment .section-container > .section > .title a {
  border-radius: 4px;
  font-weight: 700;
  padding: 1px 10px 1px 0;
  margin-right: 5px;
  color: #ccc;
}
.comment .section-container > .section:hover .title a {
  color: #999;
}
.comment .section-container > .section.active .title a {
  color: #2ba6cb;
}
.comment .section-container > .section > .content {
  padding: 0.9em 0 0;
}
.comment div.description h2 {
  font-size: 1.2em;
}
.comment .tags span {
  margin-right: 4px;
}
.comment .tags .name,
.comment .tags .type {
  font-weight: 700;
}
.comment .tags .types {
  color: #666;
}
.comment .tags .description {
  margin-left: 15px;
}
.ctx-type {
  margin-right: 6px;
  font-size: 0.7em;
}
</style><script srr="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/vendor/custom.modernizr.js"></script></head><body><div class="row"><div class="small-12 columns"><h1 class="page-title">PhysicsJS Documentation<small> dist/physicsjs-0.5.3.js</small></h1></div></div><div class="row"><div id="nav" class="large-3 columns"><div data-section="accordian" data-options="" class="section-container accordian"><div class="section active"><p data-section-title class="title"><a href="../../docs/dist/physicsjs-0.5.3.js.html"><small>dist/</small>physicsjs-0.5.3.js</a></p><div data-section-content class="content"><ul class="side-nav"><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#Decorator">Decorator</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#getProto">getProto</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#objectCreate">objectCreate</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#mixin">mixin</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#factory">factory</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#noConflict">noConflict</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#PubSub">PubSub</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#scratchpad">scratchpad</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#start">start</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#stop">stop</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#subscribe">subscribe</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#unsubscribe">unsubscribe</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#isActive">isActive</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#AABB">AABB</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#set">set</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#get">get</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#halfWidth">halfWidth</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#halfHeight">halfHeight</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#contains">contains</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#transform">transform</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#contains">contains</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#getClosestPoints">getClosestPoints</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#gjk">gjk</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#Transform">Transform</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#setTranslation">setTranslation</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#setRotation">setRotation</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#clone">clone</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#Vector">Vector</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#set">set</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#get">get</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#vadd">vadd</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#vsub">vsub</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#add">add</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#sub">sub</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#mult">mult</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#dot">dot</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#cross">cross</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#proj">proj</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#vproj">vproj</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#angle">angle</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#angle2">angle2</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#norm">norm</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#normSq">normSq</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#dist">dist</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#distSq">distSq</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#perp">perp</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#normalize">normalize</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#transform">transform</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#transformInv">transformInv</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#rotate">rotate</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#rotateInv">rotateInv</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#translate">translate</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#translateInv">translateInv</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#clone">clone</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#swap">swap</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#values">values</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#zero">zero</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#negate">negate</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#clamp">clamp</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#toString">toString</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#equals">equals</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#vadd">vadd</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#vsub">vsub</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#mult">mult</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#vproj">vproj</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#axis">axis</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#zero">zero</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#isPolygonConvex">isPolygonConvex</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#getPolygonMOI">getPolygonMOI</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#isPointInPolygon">isPointInPolygon</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#getPolygonArea">getPolygonArea</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#getPolygonCentroid">getPolygonCentroid</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#nearestPointOnLine">nearestPointOnLine</a></li><li><a href="../../docs/dist/physicsjs-0.5.3.js.html#World">World</a></li></ul></div></div></div></div><div class="small-12 large-9 columns"><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>PhysicsJS v0.5.3 - 2013-11-25<br />A modular, extendable, and easy-to-use physics engine for javascript<br /><a href='http://wellcaffeinated.net/PhysicsJS'>http://wellcaffeinated.net/PhysicsJS</a></p>

<p>Copyright (c) 2013 Jasper Palfree <a href="&#x6D;&#97;&#x69;&#x6C;&#116;&#111;:j&#x61;&#x73;&#x70;&#101;&#114;&#x40;&#x77;&#101;&#x6C;&#x6C;&#99;&#97;&#102;&#x66;&#x65;&#105;&#x6E;&#97;&#116;&#101;&#100;&#46;&#x6E;&#101;&#x74;">j&#x61;&#x73;&#x70;&#101;&#114;&#x40;&#x77;&#101;&#x6C;&#x6C;&#99;&#97;&#102;&#x66;&#x65;&#105;&#x6E;&#97;&#116;&#101;&#100;&#46;&#x6E;&#101;&#x74;</a><br />Licensed MIT</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">// ---
// inside: src/intro.js

(function (root, factory) {
    if (typeof exports === 'object') {
        // Node. 
        module.exports = factory.call(root);
    } else if (typeof define === 'function' &amp;&amp; define.amd) {
        // AMD. Register as an anonymous module.
        define(function(){ return factory.call(root) });
    } else {
        // Browser globals (root is window)
        root.Physics = factory.call(root);
    }
}(this, function () {

'use strict';

var Physics = function Physics(){

    return Physics.world.apply(Physics, arguments);
};

Physics.util = {};


// ---
// inside: lib/lodash.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>@license<br />Lo-Dash 2.2.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE<br />Build: <code>lodash exports="none" iife="(function(window){%output%;lodash.extend(Physics.util, lodash);}(this));" include="isObject,isFunction,isArray,isPlainObject,uniqueId,each,random,extend,clone,throttle,bind,sortedIndex,shuffle" --minify --output lib/lodash.js</code></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">;!function(n){function t(n){return typeof n.toString!=&quot;function&quot;&amp;&amp;typeof(n+&quot;&quot;)==&quot;string&quot;}function e(){}function r(n){n.length=0,O.length&lt;A&amp;&amp;O.push(n)}function o(n,t,e){t||(t=0),typeof e==&quot;undefined&quot;&amp;&amp;(e=n?n.length:0);var r=-1;e=e-t||0;for(var o=Array(0&gt;e?0:e);++r&lt;e;)o[r]=n[t+r];return o}function a(){}function u(n,e,a,i,l){if(a){var c=a(n);if(typeof c!=&quot;undefined&quot;)return c}if(!v(n))return n;var f=at.call(n);if(!$[f]||!mt.nodeClass&amp;&amp;t(n))return n;var s=bt[f];switch(f){case T:case B:return new s(+n);case L:case M:return new s(n);
case W:return c=s(n.source,S.exec(n)),c.lastIndex=n.lastIndex,c}if(f=Et(n),e){var p=!i;i||(i=O.pop()||[]),l||(l=O.pop()||[]);for(var g=i.length;g--;)if(i[g]==n)return l[g];c=f?s(n.length):{}}else c=f?o(n):At({},n);return f&amp;&amp;(tt.call(n,&quot;index&quot;)&amp;&amp;(c.index=n.index),tt.call(n,&quot;input&quot;)&amp;&amp;(c.input=n.input)),e?(i.push(n),l.push(c),(f?_t:Ct)(n,function(n,t){c[t]=u(n,e,a,i,l)}),p&amp;&amp;(r(i),r(l)),c):c}function i(n,t,e){if(typeof n!=&quot;function&quot;)return j;if(typeof t==&quot;undefined&quot;)return n;var r=n.__bindData__||mt.funcNames&amp;&amp;!n.name;
if(typeof r==&quot;undefined&quot;){var o=P&amp;&amp;Z.call(n);mt.funcNames||!o||C.test(o)||(r=!0),(mt.funcNames||!r)&amp;&amp;(r=!mt.funcDecomp||P.test(o),jt(n,r))}if(true!==r&amp;&amp;r&amp;&amp;1&amp;r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,o){return n.call(t,e,r,o)};case 4:return function(e,r,o,a){return n.call(t,e,r,o,a)}}return d(n,t)}function l(n,e,o,a,u,i){if(o){var c=o(n,e);if(typeof c!=&quot;undefined&quot;)return!!c}if(n===e)return 0!==n||1/n==1/e;
if(n===n&amp;&amp;!(n&amp;&amp;G[typeof n]||e&amp;&amp;G[typeof e]))return!1;if(null==n||null==e)return n===e;var f=at.call(n),s=at.call(e);if(f==F&amp;&amp;(f=R),s==F&amp;&amp;(s=R),f!=s)return!1;switch(f){case T:case B:return+n==+e;case L:return n!=+n?e!=+e:0==n?1/n==1/e:n==+e;case W:case M:return n==e+&quot;&quot;}if(s=f==I,!s){if(tt.call(n,&quot;__wrapped__&quot;)||tt.call(e,&quot;__wrapped__&quot;))return l(n.__wrapped__||n,e.__wrapped__||e,o,a,u,i);if(f!=R||!mt.nodeClass&amp;&amp;(t(n)||t(e)))return!1;var f=!mt.argsObject&amp;&amp;g(n)?Object:n.constructor,p=!mt.argsObject&amp;&amp;g(e)?Object:e.constructor;
if(f!=p&amp;&amp;!(y(f)&amp;&amp;f instanceof f&amp;&amp;y(p)&amp;&amp;p instanceof p))return!1}for(p=!u,u||(u=O.pop()||[]),i||(i=O.pop()||[]),f=u.length;f--;)if(u[f]==n)return i[f]==e;var v=0,c=!0;if(u.push(n),i.push(e),s){if(f=n.length,v=e.length,c=v==n.length,!c&amp;&amp;!a)return c;for(;v--;)if(s=f,p=e[v],a)for(;s--&amp;&amp;!(c=l(n[s],p,o,a,u,i)););else if(!(c=l(n[v],p,o,a,u,i)))break;return c}return St(e,function(t,e,r){return tt.call(r,e)?(v++,c=tt.call(n,e)&amp;&amp;l(n[e],t,o,a,u,i)):void 0}),c&amp;&amp;!a&amp;&amp;St(n,function(n,t,e){return tt.call(e,t)?c=-1&lt;--v:void 0
}),p&amp;&amp;(r(u),r(i)),c}function c(n,t,e,r,o,a){var u=1&amp;t,i=2&amp;t,l=4&amp;t,f=8&amp;t,p=16&amp;t,g=32&amp;t,h=n;if(!i&amp;&amp;!y(n))throw new TypeError;p&amp;&amp;!e.length&amp;&amp;(t&amp;=-17,p=e=!1),g&amp;&amp;!r.length&amp;&amp;(t&amp;=-33,g=r=!1);var b=n&amp;&amp;n.__bindData__;if(b)return!u||1&amp;b[1]||(b[4]=o),!u&amp;&amp;1&amp;b[1]&amp;&amp;(t|=8),!l||4&amp;b[1]||(b[5]=a),p&amp;&amp;rt.apply(b[2]||(b[2]=[]),e),g&amp;&amp;rt.apply(b[3]||(b[3]=[]),r),b[1]|=t,c.apply(null,b);if(!u||i||l||g||!(mt.fastBind||lt&amp;&amp;p))m=function(){var y=arguments,b=u?o:this;return(l||p||g)&amp;&amp;(y=vt.call(y),p&amp;&amp;ut.apply(y,e),g&amp;&amp;rt.apply(y,r),l&amp;&amp;y.length&lt;a)?(t|=16,c(n,f?t:-4&amp;t,y,null,o,a)):(i&amp;&amp;(n=b[h]),this instanceof m?(b=s(n.prototype),y=n.apply(b,y),v(y)?y:b):n.apply(b,y))
};else{if(p){var d=[o];rt.apply(d,e)}var m=p?lt.apply(n,d):lt.call(n,o)}return jt(m,vt.call(arguments)),m}function f(){q.h=D,q.b=q.c=q.g=q.i=&quot;&quot;,q.e=&quot;t&quot;,q.j=!0;for(var n,t=0;n=arguments[t];t++)for(var e in n)q[e]=n[e];t=q.a,q.d=/^[^,]+/.exec(t)[0],n=Function,t=&quot;return function(&quot;+t+&quot;){&quot;,e=q;var r=&quot;var n,t=&quot;+e.d+&quot;,E=&quot;+e.e+&quot;;if(!t)return E;&quot;+e.i+&quot;;&quot;;e.b?(r+=&quot;var u=t.length;n=-1;if(&quot;+e.b+&quot;){&quot;,mt.unindexedChars&amp;&amp;(r+=&quot;if(s(t)){t=t.split('')}&quot;),r+=&quot;while(++n&lt;u){&quot;+e.g+&quot;;}}else{&quot;):mt.nonEnumArgs&amp;&amp;(r+=&quot;var u=t.length;n=-1;if(u&amp;&amp;p(t)){while(++n&lt;u){n+='';&quot;+e.g+&quot;;}}else{&quot;),mt.enumPrototypes&amp;&amp;(r+=&quot;var G=typeof t=='function';&quot;),mt.enumErrorProps&amp;&amp;(r+=&quot;var F=t===k||t instanceof Error;&quot;);
var o=[];if(mt.enumPrototypes&amp;&amp;o.push('!(G&amp;&amp;n==&quot;prototype&quot;)'),mt.enumErrorProps&amp;&amp;o.push('!(F&amp;&amp;(n==&quot;message&quot;||n==&quot;name&quot;))'),e.j&amp;&amp;e.f)r+=&quot;var C=-1,D=B[typeof t]&amp;&amp;v(t),u=D?D.length:0;while(++C&lt;u){n=D[C];&quot;,o.length&amp;&amp;(r+=&quot;if(&quot;+o.join(&quot;&amp;&amp;&quot;)+&quot;){&quot;),r+=e.g+&quot;;&quot;,o.length&amp;&amp;(r+=&quot;}&quot;),r+=&quot;}&quot;;else if(r+=&quot;for(n in t){&quot;,e.j&amp;&amp;o.push(&quot;m.call(t, n)&quot;),o.length&amp;&amp;(r+=&quot;if(&quot;+o.join(&quot;&amp;&amp;&quot;)+&quot;){&quot;),r+=e.g+&quot;;&quot;,o.length&amp;&amp;(r+=&quot;}&quot;),r+=&quot;}&quot;,mt.nonEnumShadows){for(r+=&quot;if(t!==A){var i=t.constructor,r=t===(i&amp;&amp;i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];&quot;,k=0;7&gt;k;k++)r+=&quot;n='&quot;+e.h[k]+&quot;';if((!(r&amp;&amp;x[n])&amp;&amp;m.call(t,n))&quot;,e.j||(r+=&quot;||(!x[n]&amp;&amp;t[n]!==A[n])&quot;),r+=&quot;){&quot;+e.g+&quot;}&quot;;
r+=&quot;}&quot;}return(e.b||mt.nonEnumArgs)&amp;&amp;(r+=&quot;}&quot;),r+=e.c+&quot;;return E&quot;,n(&quot;d,j,k,m,o,p,q,s,v,A,B,y,I,J,L&quot;,t+r+&quot;}&quot;)(i,N,V,tt,_,g,Et,h,q.f,Q,G,dt,M,U,at)}function s(n){return v(n)?ct(n):{}}function p(n){var e,r;return!n||at.call(n)!=R||(e=n.constructor,y(e)&amp;&amp;!(e instanceof e))||!mt.argsClass&amp;&amp;g(n)||!mt.nodeClass&amp;&amp;t(n)?!1:mt.ownLast?(St(n,function(n,t,e){return r=tt.call(e,t),!1}),false!==r):(St(n,function(n,t){r=t}),typeof r==&quot;undefined&quot;||tt.call(n,r))}function g(n){return n&amp;&amp;typeof n==&quot;object&quot;&amp;&amp;typeof n.length==&quot;number&quot;&amp;&amp;at.call(n)==F||!1
}function y(n){return typeof n==&quot;function&quot;}function v(n){return!(!n||!G[typeof n])}function h(n){return typeof n==&quot;string&quot;||at.call(n)==M}function b(n,t,e){if(t&amp;&amp;typeof e==&quot;undefined&quot;&amp;&amp;Et(n)){e=-1;for(var r=n.length;++e&lt;r&amp;&amp;false!==t(n[e],e,n););}else _t(n,t,e);return n}function d(n,t){return 2&lt;arguments.length?c(n,17,vt.call(arguments,2),null,t):c(n,1,null,null,t)}function m(n,t,e){var r,o,a,u,i,l,c,f=0,s=!1,p=!0;if(!y(n))throw new TypeError;if(t=pt(0,t)||0,true===e)var g=!0,p=!1;else v(e)&amp;&amp;(g=e.leading,s=&quot;maxWait&quot;in e&amp;&amp;(pt(t,e.maxWait)||0),p=&quot;trailing&quot;in e?e.trailing:p);
var h=function(){var e=t-(et()-u);0&lt;e?l=setTimeout(h,e):(o&amp;&amp;clearTimeout(o),e=c,o=l=c=w,e&amp;&amp;(f=et(),a=n.apply(i,r)))},b=function(){l&amp;&amp;clearTimeout(l),o=l=c=w,(p||s!==t)&amp;&amp;(f=et(),a=n.apply(i,r))};return function(){if(r=arguments,u=et(),i=this,c=p&amp;&amp;(l||!g),false===s)var e=g&amp;&amp;!l;else{o||g||(f=u);var y=s-(u-f);0&lt;y?o||(o=setTimeout(b,y)):(o&amp;&amp;(o=clearTimeout(o)),f=u,a=n.apply(i,r))}return l||t===s||(l=setTimeout(h,t)),e&amp;&amp;(a=n.apply(i,r)),a}}function j(n){return n}function E(n,t,e){var r=null==n,o=null==t;return null==e&amp;&amp;(typeof n==&quot;boolean&quot;&amp;&amp;o?(e=n,n=1):o||typeof t!=&quot;boolean&quot;||(e=t,o=!0)),r&amp;&amp;o&amp;&amp;(t=1),n=+n||0,o?(t=n,n=0):t=+t||0,r=yt(),e||n%1||t%1?gt(n+r*(t-n+parseFloat(&quot;1e-&quot;+((r+&quot;&quot;).length-1))),t):n+Y(r*(t-n+1))
}var w,O=[],x=0,_={},A=40,S=/\w*$/,C=/^function[ \n\r\t]+\w/,P=/\bthis\b/,D=&quot;constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf&quot;.split(&quot; &quot;),F=&quot;[object Arguments]&quot;,I=&quot;[object Array]&quot;,T=&quot;[object Boolean]&quot;,B=&quot;[object Date]&quot;,N=&quot;[object Error]&quot;,L=&quot;[object Number]&quot;,R=&quot;[object Object]&quot;,W=&quot;[object RegExp]&quot;,M=&quot;[object String]&quot;,$={&quot;[object Function]&quot;:!1};$[F]=$[I]=$[T]=$[B]=$[L]=$[R]=$[W]=$[M]=!0;var z={leading:!1,maxWait:0,trailing:!1},K={configurable:!1,enumerable:!1,value:null,writable:!1},q={a:&quot;&quot;,b:null,c:&quot;&quot;,d:&quot;&quot;,e:&quot;&quot;,v:null,g:&quot;&quot;,h:null,support:null,i:&quot;&quot;,j:!1},G={&quot;boolean&quot;:!1,&quot;function&quot;:!0,object:!0,number:!1,string:!1,undefined:!1},J=G[typeof n]&amp;&amp;n||this,H=[],V=Error.prototype,Q=Object.prototype,U=String.prototype,X=RegExp(&quot;^&quot;+(Q.valueOf+&quot;&quot;).replace(/[.*+?^${}()|[\]\\]/g,&quot;\\$&amp;&quot;).replace(/valueOf|for [^\]]+/g,&quot;.+?&quot;)+&quot;$&quot;),Y=Math.floor,Z=Function.prototype.toString,nt=X.test(nt=Object.getPrototypeOf)&amp;&amp;nt,tt=Q.hasOwnProperty,et=X.test(et=Date.now)&amp;&amp;et||function(){return+new Date
},rt=H.push,ot=Q.propertyIsEnumerable,at=Q.toString,ut=H.unshift,it=function(){try{var n={},t=X.test(t=Object.defineProperty)&amp;&amp;t,e=t(n,n,n)&amp;&amp;t}catch(r){}return e}(),lt=X.test(lt=at.bind)&amp;&amp;lt,ct=X.test(ct=Object.create)&amp;&amp;ct,ft=X.test(ft=Array.isArray)&amp;&amp;ft,st=X.test(st=Object.keys)&amp;&amp;st,pt=Math.max,gt=Math.min,yt=Math.random,vt=H.slice;n=X.test(J.attachEvent);var ht=lt&amp;&amp;!/\n|true/.test(lt+n),bt={};bt[I]=Array,bt[T]=Boolean,bt[B]=Date,bt[&quot;[object Function]&quot;]=Function,bt[R]=Object,bt[L]=Number,bt[W]=RegExp,bt[M]=String;
var dt={};dt[I]=dt[B]=dt[L]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},dt[T]=dt[M]={constructor:!0,toString:!0,valueOf:!0},dt[N]=dt[&quot;[object Function]&quot;]=dt[W]={constructor:!0,toString:!0},dt[R]={constructor:!0},function(){for(var n=D.length;n--;){var t,e=D[n];for(t in dt)tt.call(dt,t)&amp;&amp;!tt.call(dt[t],e)&amp;&amp;(dt[t][e]=!1)}}();var mt=a.support={};!function(){var n=function(){this.x=1},t={0:1,length:1},e=[];n.prototype={valueOf:1,y:1};for(var r in new n)e.push(r);for(r in arguments);mt.argsClass=at.call(arguments)==F,mt.argsObject=arguments.constructor==Object&amp;&amp;!(arguments instanceof Array),mt.enumErrorProps=ot.call(V,&quot;message&quot;)||ot.call(V,&quot;name&quot;),mt.enumPrototypes=ot.call(n,&quot;prototype&quot;),mt.fastBind=lt&amp;&amp;!ht,mt.funcDecomp=!X.test(J.WinRTError)&amp;&amp;P.test(function(){return this
}),mt.funcNames=typeof Function.name==&quot;string&quot;,mt.nonEnumArgs=0!=r,mt.nonEnumShadows=!/valueOf/.test(e),mt.ownLast=&quot;x&quot;!=e[0],mt.spliceObjects=(H.splice.call(t,0,1),!t[0]),mt.unindexedChars=&quot;xx&quot;!=&quot;x&quot;[0]+Object(&quot;x&quot;)[0];try{mt.nodeClass=!(at.call(document)==R&amp;&amp;!({toString:0}+&quot;&quot;))}catch(o){mt.nodeClass=!0}}(1),ct||(s=function(n){if(v(n)){e.prototype=n;var t=new e;e.prototype=null}return t||{}});var jt=it?function(n,t){K.value=t,it(n,&quot;__bindData__&quot;,K)}:e;mt.argsClass||(g=function(n){return n&amp;&amp;typeof n==&quot;object&quot;&amp;&amp;typeof n.length==&quot;number&quot;&amp;&amp;tt.call(n,&quot;callee&quot;)||!1
});var Et=ft||function(n){return n&amp;&amp;typeof n==&quot;object&quot;&amp;&amp;typeof n.length==&quot;number&quot;&amp;&amp;at.call(n)==I||!1},wt=f({a:&quot;z&quot;,e:&quot;[]&quot;,i:&quot;if(!(B[typeof z]))return E&quot;,g:&quot;E.push(n)&quot;}),Ot=st?function(n){return v(n)?mt.enumPrototypes&amp;&amp;typeof n==&quot;function&quot;||mt.nonEnumArgs&amp;&amp;n.length&amp;&amp;g(n)?wt(n):st(n):[]}:wt,ft={a:&quot;g,e,K&quot;,i:&quot;e=e&amp;&amp;typeof K=='undefined'?e:d(e,K,3)&quot;,b:&quot;typeof u=='number'&quot;,v:Ot,g:&quot;if(e(t[n],n,g)===false)return E&quot;};n={a:&quot;z,H,l&quot;,i:&quot;var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b&lt;c){t=a[b];if(t&amp;&amp;B[typeof t]){&quot;,v:Ot,g:&quot;if(typeof E[n]=='undefined')E[n]=t[n]&quot;,c:&quot;}}&quot;};
var xt={i:&quot;if(!B[typeof t])return E;&quot;+ft.i,b:!1},_t=f(ft),At=f(n,{i:n.i.replace(&quot;;&quot;,&quot;;if(c&gt;3&amp;&amp;typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c&gt;2&amp;&amp;typeof a[c-1]=='function'){e=a[--c]}&quot;),g:&quot;E[n]=e?e(E[n],t[n]):t[n]&quot;}),St=f(ft,xt,{j:!1}),Ct=f(ft,xt);y(/x/)&amp;&amp;(y=function(n){return typeof n==&quot;function&quot;&amp;&amp;&quot;[object Function]&quot;==at.call(n)}),ft=nt?function(n){if(!n||at.call(n)!=R||!mt.argsClass&amp;&amp;g(n))return!1;var t=n.valueOf,e=typeof t==&quot;function&quot;&amp;&amp;(e=nt(t))&amp;&amp;nt(e);return e?n==e||nt(n)==e:p(n)
}:p,a.assign=At,a.bind=d,a.createCallback=function(n,t,e){var r=typeof n;if(null==n||&quot;function&quot;==r)return i(n,t,e);if(&quot;object&quot;!=r)return function(t){return t[n]};var o=Ot(n),a=o[0],u=n[a];return 1!=o.length||u!==u||v(u)?function(t){for(var e=o.length,r=!1;e--&amp;&amp;(r=l(t[o[e]],n[o[e]],null,!0)););return r}:function(n){return n=n[a],u===n&amp;&amp;(0!==u||1/u==1/n)}},a.debounce=m,a.forEach=b,a.forIn=St,a.forOwn=Ct,a.keys=Ot,a.shuffle=function(n){var t=-1,e=n?n.length:0,r=Array(typeof e==&quot;number&quot;?e:0);return b(n,function(n){var e=E(++t);
r[t]=r[e],r[e]=n}),r},a.throttle=function(n,t,e){var r=!0,o=!0;if(!y(n))throw new TypeError;return false===e?r=!1:v(e)&amp;&amp;(r=&quot;leading&quot;in e?e.leading:r,o=&quot;trailing&quot;in e?e.trailing:o),z.leading=r,z.maxWait=t,z.trailing=o,m(n,t,z)},a.each=b,a.extend=At,a.clone=function(n,t,e,r){return typeof t!=&quot;boolean&quot;&amp;&amp;null!=t&amp;&amp;(r=e,e=t,t=!1),u(n,t,typeof e==&quot;function&quot;&amp;&amp;i(e,r,1))},a.identity=j,a.isArguments=g,a.isArray=Et,a.isFunction=y,a.isObject=v,a.isPlainObject=ft,a.isString=h,a.random=E,a.sortedIndex=function(n,t,e,r){var o=0,u=n?n.length:o;
for(e=e?a.createCallback(e,r,1):j,t=e(t);o&lt;u;)r=o+u&gt;&gt;&gt;1,e(n[r])&lt;t?o=r+1:u=r;return o},a.uniqueId=function(n){var t=++x;return(null==n?&quot;&quot;:n)+&quot;&quot;+t},a.VERSION=&quot;2.2.1&quot;,a.extend(Physics.util,a)}(this);

// ---
// inside: src/util/decorator.js</code></pre></div></div></div></article><article class="comment"><header><h1 id="Decorator">Decorator</h1><h5 class="subheader"><div class="label radius ctx-type">declaration</div>Decorator</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@example: </span><span class="string"></span></li><li class="tag"><span class="type">@: </span><span class="string"></span></li><li class="tag"><span class="type">@var: </span><span class="string">service = Decorator('service', {</span></li><li class="tag"><span class="type">@: </span><span class="string">// prototype methods...</span></li><li class="tag"><span class="type">@: </span><span class="string">method: function( args ){</span></li><li class="tag"><span class="type">@: </span><span class="string">}</span></li><li class="tag"><span class="type">@});: </span><span class="string"></span></li><li class="tag"><span class="type">@: </span><span class="string"></span></li><li class="tag"><span class="type">@//: </span><span class="string">define</span></li><li class="tag"><span class="type">@service(: </span><span class="string">'name', (optional)'parent-name', function decorator( parent ){</span></li><li class="tag"><span class="type">@: </span><span class="string"></span></li><li class="tag"><span class="type">@: </span><span class="string">// extend further...</span></li><li class="tag"><span class="type">@: </span><span class="string">return {</span></li><li class="tag"><span class="type">@: </span><span class="string">// overrides</span></li><li class="tag"><span class="type">@: </span><span class="string">init: function( cfg ){</span></li><li class="tag"><span class="type">@: </span><span class="string">parent.init.call(this, cfg);</span></li><li class="tag"><span class="type">@: </span><span class="string">}</span></li><li class="tag"><span class="type">@: </span><span class="string">};</span></li><li class="tag"><span class="type">@});: </span><span class="string"></span></li><li class="tag"><span class="type">@: </span><span class="string"></span></li><li class="tag"><span class="type">@//: </span><span class="string">instantiate</span></li><li class="tag"><span class="type">@var: </span><span class="string">options = { key: 'val' };</span></li><li class="tag"><span class="type">@var: </span><span class="string">instance = service( 'name', options );</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Facilitates creation of decorator service functions</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var Decorator = Physics.util.decorator = function Decorator( type, baseProto ){

    var registry = {}
        ,proto = {}
        ;

    // extend callback that only extends functions
    var copyFn = function copyFn( a, b ){

        return Physics.util.isFunction( b ) ? b : a;
    };

    // http://ejohn.org/blog/objectgetprototypeof/</code></pre></div></div></div></article><article class="comment"><header><h1 id="getProto">getProto</h1><h5 class="subheader"><div class="label radius ctx-type">declaration</div>getProto</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>jshint -W103</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var getProto = Object.getPrototypeOf;
    if ( typeof getProto !== 'function' ) {
        if ( typeof 'test'.__proto__ === 'object' ) {
            getProto = function(object){
                return object.__proto__;
            };
        } else {
            getProto = function(object){
                // May break if the constructor has been tampered with
                return object.constructor.prototype;
            };
        }
    }</code></pre></div></div></div></article><article class="comment"><header><h1 id="objectCreate">objectCreate</h1><h5 class="subheader"><div class="label radius ctx-type">declaration</div>objectCreate</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>jshint +W103</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var objectCreate = Object.create;
    if (typeof objectCreate !== 'function') {
        objectCreate = function (o) {
            function F() {}
            F.prototype = o;
            return new F();
        };
    }</code></pre></div></div></div></article><article class="comment"><header><h1 id="mixin">mixin</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>mixin()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{String,Object}</span><span class="name">key</span><span class="description">The method name. OR object with many key: fn pairs.</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">val</span><span class="description">The function to assign</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply mixin methods to decorator base</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var mixin = function mixin( key, val ){

        if ( typeof key === 'object' ){
            proto = Physics.util.extend(proto, key, copyFn);
            proto.type = type;
            return;
        }

        if ( key !== 'type' &amp;&amp; Physics.util.isFunction( val ) ){
            proto[ key ] = val;
        }
    };

    // @TODO: not sure of the best way to make the constructor names
    // transparent and readable in debug consoles...
    mixin( baseProto );</code></pre></div></div></div></article><article class="comment"><header><h1 id="factory">factory</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>factory()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{String}</span><span class="name">name</span><span class="description">The class name</span></li><li class="tag"><span class="type">@param: </span><span class="types">{String}</span><span class="name">parentName</span><span class="description">(optional) The name of parent class to extend</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">decorator</span><span class="description">(optional) The decorator function that should define and return methods to extend (decorate) the base class</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">cfg</span><span class="description">(optional) The configuration to pass to the class initializer</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void,Object}</span><span class="description">If defining without the &quot;cfg&quot; parameter, void will be returned. Otherwise the class instance will be returned</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Factory function for definition and instantiation of subclasses.<br />If class with "name" is not defined, the "decorator" parameter is required to define it first.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var factory = function factory( name, parentName, decorator, cfg ){

        var instance
            ,result
            ,parent = proto
            ,tmp
            ;

        // set parent if specified
        if ( typeof parentName !== 'string' ){

            // ... otherwise reassign parameters
            cfg = decorator;
            decorator = parentName;

        } else {

            // extend the specified module
            parent = registry[ parentName ];

            if ( !parent ){

                throw 'Error: &quot;' + parentName + '&quot; ' + type + ' not defined';
            }

            parent = parent.prototype;
        }

        if ( typeof decorator === 'function' ){

            result = registry[ name ];

            if ( result ){

                result.prototype = Physics.util.extend(result.prototype, decorator( getProto(result.prototype) ), copyFn);
                
            } else {
                // newly defined
                // store the new class
                result = registry[ name ] = function constructor( opts ){
                    if (this.init){
                        this.init( opts );
                    }
                };

                result.prototype = objectCreate( parent );
                result.prototype = Physics.util.extend(result.prototype, decorator( parent ), copyFn);
            }

            result.prototype.type = type;
            result.prototype.name = name;
            
        } else {

            cfg = decorator || {};
            result = registry[ name ];
            if (!result){

                throw 'Error: &quot;' + name + '&quot; ' + type + ' not defined';
            }
        }

        if ( cfg ) {

            // create a new instance from the provided decorator
            return new result( cfg );
        }
    };

    factory.mixin = mixin;

    return factory;
};

// ---
// inside: src/util/noconflict.js

(function( window ){

    var _Physics = window.Physics;</code></pre></div></div></div></article><article class="comment"><header><h1 id="noConflict">noConflict</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.noConflict()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Physics}</span><span class="description">The PhysicsJS reference</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Restore the original reference to the global window.Physics variable.<br />Does nothing if PhysicsJS doesn't have a reference in global scope</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.noConflict = function(){

        if ( window.Physics === Physics ) {
            window.Physics = _Physics;
        }
        
        return Physics;
    };

})( this );

// ---
// inside: src/util/pubsub.js

(function(){</code></pre></div></div></div></article><article class="comment"><header><h1 id="PubSub">PubSub</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>PubSub()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>PubSub implementation (fast)</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var PubSub = function PubSub( defaultScope ){

        if (!(this instanceof PubSub)){
            return new PubSub( defaultScope );
        }

        this.initPubsub( defaultScope );
    };

    PubSub.prototype = {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">defaultScope</span><span class="description">Default scope to bind events to</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialize</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">initPubsub: function( defaultScope ){
            this._topics = {};
            this._defaultScope = defaultScope || this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{String,Object}</span><span class="name">topic</span><span class="description">The topic name, or a config with key/value pairs of { topic: callbackFn, ... }</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">fn</span><span class="description">The callback function (if not using Object as previous argument)</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">scope</span><span class="description">(optional) The scope to bind callback to</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">priority</span><span class="description">(optional) The priority of the callback (higher = earlier)</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Subscribe a callback (or callbacks) to a topic (topics).</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">subscribe: function( topic, fn, scope, priority ){

            var listeners = this._topics[ topic ] || (this._topics[ topic ] = [])
                ,orig = fn
                ,idx
                ;

            // check if we're subscribing to multiple topics
            // with an object
            if ( Physics.util.isObject( topic ) ){

                for ( var t in topic ){
                    
                    this.subscribe( t, topic[ t ], fn, scope );
                }

                return this;
            }

            if ( Physics.util.isObject( scope ) ){
                
                fn = Physics.util.bind( fn, scope );
                fn._bindfn_ = orig;

            } else if (!priority) {

                priority = scope;
            }

            fn._priority_ = priority;

            idx = Physics.util.sortedIndex( listeners, fn, '_priority_' );

            listeners.splice( idx, 0, fn );
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{String}</span><span class="name">topic</span><span class="description">Topic name OR true to remove all listeners on all topics</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">fn</span><span class="description">The original callback function OR true to remove all listeners</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Unsubscribe function from topic.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">unsubscribe: function( topic, fn ){

            if ( topic === true ){
                this._topics = {};
                return this;
            }

            var listeners = this._topics[ topic ]
                ,listn
                ;

            if (!listeners){
                return this;
            }

            if ( fn === true ){
                this._topics[ topic ] = [];
                return this;
            }

            for ( var i = 0, l = listeners.length; i &lt; l; i++ ){
                
                listn = listeners[ i ];

                if ( listn._bindfn_ === fn || listn === fn ){
                    listeners.splice(i, 1);
                    break;
                }
            }

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object,String}</span><span class="name">data</span><span class="description"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">scope</span><span class="description">The scope to be included in the data argument passed to callbacks</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Publish data to a topic</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">publish: function( data, scope ){

            if (typeof data !== 'object'){
                data = { topic: data };
            }

            var topic = data.topic
                ,listeners = this._topics[ topic ]
                ,l = listeners &amp;&amp; listeners.length
                ;

            if ( !topic ){
                throw 'Error: No topic specified in call to world.publish()';
            }

            if ( !l ){
                return this;
            }
            
            data.scope = data.scope || this._defaultScope;

            while ( l-- ){
                
                data.handler = listeners[ l ];
                data.handler( data );
            }

            return this;
        }
    };
    
    Physics.util.pubsub = PubSub;
})();

// ---
// inside: src/util/request-anim-frame.js

// http://paulirish.com/2011/requestanimationframe-for-smart-animating/
// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
 
// requestAnimationFrame polyfill by Erik Moller
// fixes from Paul Irish and Tino Zijdel
 
(function(window) {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x &lt; vendors.length &amp;&amp; !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
    }
 
    if (!window.requestAnimationFrame){
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); }, 
              timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };
    }
 
    if (!window.cancelAnimationFrame){
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
    }
}(this));

// ---
// inside: src/util/scratchpad.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>scratchpad<br />thread-safe management of temporary (voletile)<br />objects for use in calculations</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">(function(){

    // constants
    var SCRATCH_MAX_SCRATCHES = 100; // maximum number of scratches
    var SCRATCH_MAX_INDEX = 10; // maximum number of any type of temp objects
    var SCRATCH_USAGE_ERROR = 'Error: Scratchpad used after .done() called. (Could it be unintentionally scoped?)';
    var SCRATCH_INDEX_OUT_OF_BOUNDS = 'Error: Scratchpad usage space out of bounds. (Did you forget to call .done()?)';
    var SCRATCH_MAX_REACHED = 'Error: Too many scratchpads created. (Did you forget to call .done()?)';

    // cache previously created scratches
    var scratches = [];
    var numScratches = 0;

    var ScratchCls = function ScratchCls(){

        // private variables
        this.objIndex = 0;
        this.arrayIndex = 0;
        this.vectorIndex = 0;
        this.aabbIndex = 0;
        this.transformIndex = 0;
        this.objectStack = [];
        this.arrayStack = [];
        this.vectorStack = [];
        this.aabbStack = [];
        this.transformStack = [];

        if (++numScratches &gt;= SCRATCH_MAX_SCRATCHES){
            throw SCRATCH_MAX_REACHED;
        }
    };

    ScratchCls.prototype = {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Declare that your work is finished. Release temp objects for use elsewhere. Must be called when immediate work is done.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">done: function(){

            this._active = false;
            this.objIndex = this.arrayIndex = this.vectorIndex = this.aabbIndex = this.transformIndex = 0;
            // add it back to the scratch stack for future use
            scratches.push(this);
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description">The temporary (dirty) object</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get a temporary object (dirty)</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">object: function(){

            var stack = this.objectStack;

            if (!this._active){
                throw SCRATCH_USAGE_ERROR;
            }

            if (this.objIndex &gt;= SCRATCH_MAX_INDEX){
                throw SCRATCH_INDEX_OUT_OF_BOUNDS;
            }

            return stack[ this.objIndex++ ] || stack[ stack.push({}) - 1 ];
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Array}</span><span class="description">Temporary (dirty) array</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get a temporary array.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">array: function(){

            var stack = this.arrayStack;

            if (!this._active){
                throw SCRATCH_USAGE_ERROR;
            }

            if (this.arrIndex &gt;= SCRATCH_MAX_INDEX){
                throw SCRATCH_INDEX_OUT_OF_BOUNDS;
            }

            return stack[ this.arrIndex++ ] || stack[ stack.push([]) - 1 ];
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Vector}</span><span class="description">The temporary (dirty) vector.</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get a temporary Vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">vector: function(){

            var stack = this.vectorStack;

            if (!this._active){
                throw SCRATCH_USAGE_ERROR;
            }

            if (this.vectorIndex &gt;= SCRATCH_MAX_INDEX){
                throw SCRATCH_INDEX_OUT_OF_BOUNDS;
            }

            return stack[ this.vectorIndex++ ] || stack[ stack.push(Physics.vector()) - 1 ];
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{AABB}</span><span class="description">The temporary (dirty) AABB</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get a temporary AABB</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">aabb: function(){

            var stack = this.aabbStack;

            if (!this._active){
                throw SCRATCH_USAGE_ERROR;
            }

            if (this.aabbIndex &gt;= SCRATCH_MAX_INDEX){
                throw SCRATCH_INDEX_OUT_OF_BOUNDS;
            }

            return stack[ this.aabbIndex++ ] || stack[ stack.push(Physics.aabb()) - 1 ];
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Transform}</span><span class="description">The temporary (dirty) transform</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get a temporary Transform</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">transform: function(){

            var stack = this.transformStack;

            if (!this._active){
                throw SCRATCH_USAGE_ERROR;
            }

            if (this.transformIndex &gt;= SCRATCH_MAX_INDEX){
                throw SCRATCH_INDEX_OUT_OF_BOUNDS;
            }

            return stack[ this.transformIndex++ ] || stack[ stack.push(Physics.transform()) - 1 ];
        }
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="scratchpad">scratchpad</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.scratchpad()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{ScratchCls}</span><span class="description">The scratchpad</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get a new scratchpad to work from. Call .done() when finished.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.scratchpad = function(){

        var scratch = scratches.pop() || new ScratchCls();
        scratch._active = true;
        return scratch;
    };

})();

// ---
// inside: src/util/ticker.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>The Ticker singleton for easily binding callbacks to requestAnimationFrame</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">(function(window){
        
    var lastTime = 0
        ,active = false
        ,listeners = []
        ;</code></pre></div></div></div></article><article class="comment"><header><h1 id="start">start</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>start()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Start the ticker</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">function start(){
        
        lastTime = (new Date()).getTime();
        active = true;
        step();

        return this;
    }</code></pre></div></div></div></article><article class="comment"><header><h1 id="stop">stop</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>stop()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Stop the ticker</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">function stop(){

        active = false;
        return this;
    }</code></pre></div></div></div></article><article class="comment"><header><h1 id="subscribe">subscribe</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>subscribe()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">listener</span><span class="description">The callback function</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Subscribe a callback to the ticker</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">function subscribe( listener ){

        // if function and not already in listeners...
        if ( typeof listener === 'function' ){

            for ( var i = 0, l = listeners.length; i &lt; l; ++i ){
                
                if (listener === listeners[ i ]){
                    return this;
                }
            }

            // add it
            listeners.push( listener );
        }
        
        return this;
    }</code></pre></div></div></div></article><article class="comment"><header><h1 id="unsubscribe">unsubscribe</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>unsubscribe()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">listener</span><span class="description">Original callback added</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Unsubscribe a callback from the ticker</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">function unsubscribe( listener ){

        var fns = listeners;

        for ( var i = 0, l = fns.length; i &lt; l; ++i ){
            
            if ( fns[ i ] === listener ){

                // remove it
                fns.splice( i, 1 );
                return this;
            }
        }

        return this;
    }</code></pre></div></div></div></article><article class="comment"><header><h1 id="isActive">isActive</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>isActive()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Boolean}</span><span class="description">True if running</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Determine if ticker is currently running</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">function isActive(){

        return !!active;
    }

    // API
    Physics.util.ticker = {
        start: start,
        stop: stop,
        subscribe: subscribe,
        unsubscribe: unsubscribe,
        isActive: isActive
    };

}(this));

// ---
// inside: src/math/aabb.js

(function(){</code></pre></div></div></div></article><article class="comment"><header><h1 id="AABB">AABB</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>AABB()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object,Number}</span><span class="name">minX</span><span class="description">Either an object with the aabb values, or the minimum x value</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">minY</span><span class="description">Minimum y value</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">maxX</span><span class="description">Maximum x value</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">maxY</span><span class="description">Maximum y value</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Axis Aligned Bounding Box implementation</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var AABB = function AABB( minX, minY, maxX, maxY ){

        // enforce instantiation
        if ( !(this instanceof AABB) ){

            return new AABB( minX, minY, maxX, maxY );
        }

        this._pos = Physics.vector();
        
        this.set( minX, minY, maxX, maxY );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="set">set</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>AABB.prototype.set()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object,Number}</span><span class="name">minX</span><span class="description">Either an object with the aabb values, or the minimum x value</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">minY</span><span class="description">Minimum y value</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">maxX</span><span class="description">Maximum x value</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">maxY</span><span class="description">Maximum y value</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Set the aabb values</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">AABB.prototype.set = function set( minX, minY, maxX, maxY ){

        if ( Physics.util.isObject(minX) ){

            this._pos.clone( minX.pos );
            this._hw = minX.halfWidth;
            this._hh = minX.halfHeight;
            
            return this;
        }

        this._pos.set( 0.5 * (maxX + minX), 0.5 * (maxY + minY) );
        this._hw = 0.5 * (maxX - minX);
        this._hh = 0.5 * (maxY - minY);
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="get">get</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>AABB.prototype.get()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description">The aabb values</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the aabb values as a plain object</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">AABB.prototype.get = function get(){

        var hw = this.halfWidth()
            ,hh = this.halfHeight()
            ;

        return {
            pos: this._pos.values(),
            halfWidth: hw,
            halfHeight: hh,
            // useful for vector operations
            x: hw,
            y: hh
        };
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="halfWidth">halfWidth</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>AABB.prototype.halfWidth()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Number}</span><span class="description">The half-width</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the half-width measurement of the aabb</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">AABB.prototype.halfWidth = function halfWidth(){

        return this._hw;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="halfHeight">halfHeight</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>AABB.prototype.halfHeight()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Number}</span><span class="description">The half-height</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the half-height measurement of the aabb</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">AABB.prototype.halfHeight = function halfHeight(){

        return this._hh;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="contains">contains</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>AABB.prototype.contains()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">pt</span><span class="description">The point to check</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Boolean}</span><span class="description">True if point is inside aabb</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Check if point is inside bounds</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">AABB.prototype.contains = function contains( pt ){

        var x = pt.x !== undefined ? pt.x : pt.get(0)
            ,y = pt.y !== undefined ? pt.y : pt.get(1)
            ;

        return  (x &gt; (this._pos.get(0) - this._hw)) &amp;&amp; 
                (x &lt; (this._pos.get(0) + this._hw)) &amp;&amp;
                (y &gt; (this._pos.get(1) - this._hh)) &amp;&amp;
                (y &lt; (this._pos.get(1) + this._hh));
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="transform">transform</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>AABB.prototype.transform()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Transform}</span><span class="name">trans</span><span class="description">The transformation</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply a transformation to the aabb.<br />Rotation origin is relative to the aabb's center.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">AABB.prototype.transform = function transform( trans ){

        var hw = this._hw
            ,hh = this._hh
            ,scratch = Physics.scratchpad()
            ,bottomRight = scratch.vector().set( hw, hh )
            ,topRight = scratch.vector().set( hw, -hh )
            ;

        // translate the center
        this._pos.translate( trans );

        // rotate the corners
        bottomRight.rotate( trans );
        topRight.rotate( trans );

        // we need to keep the box oriented with the axis, but expand it to
        // accomodate the rotation
        this._hw = Math.max( Math.abs(bottomRight.get(0)), Math.abs(topRight.get(0)) );
        this._hh = Math.max( Math.abs(bottomRight.get(1)), Math.abs(topRight.get(1)) );

        scratch.done();
        return this;
    };

    // Static methods</code></pre></div></div></div></article><article class="comment"><header><h1 id="contains">contains</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>AABB.contains()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{AABB,Object}</span><span class="name">aabb</span><span class="description">The aabb instance or aabb values</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">pt</span><span class="description">The point to check</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Boolean}</span><span class="description">True if point is inside aabb</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Check if a point is inside an aabb</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">AABB.contains = function( aabb, pt ){

        var x = pt.x !== undefined ? pt.x : pt.get(0)
            ,y = pt.y !== undefined ? pt.y : pt.get(1)
            ;

        aabb = aabb.get ? aabb.get() : aabb;

        return  (x &gt; (aabb.pos.x - aabb.halfWidth)) &amp;&amp; 
                (x &lt; (aabb.pos.x + aabb.halfWidth)) &amp;&amp;
                (y &gt; (aabb.pos.y - aabb.halfHeight)) &amp;&amp;
                (y &lt; (aabb.pos.y + aabb.halfHeight));
    };

    Physics.aabb = AABB;
}());

// ---
// inside: src/math/gjk.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>GilbertJohnsonKeerthi object collison algorithm<br />For general information about GJK see: <br /> - <a href='http://www.codezealot.org/archives/88'>http://www.codezealot.org/archives/88</a><br /> - <a href='http://mollyrocket.com/849'>http://mollyrocket.com/849</a></p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">(function(){

    // the algorithm doesn't always converge for curved shapes.
    // need these constants to dictate how accurate we want to be.
    var gjkAccuracy = 0.0001;
    var gjkMaxIterations = 100;

    // get the next search direction from two simplex points
    var getNextSearchDir = function getNextSearchDir( ptA, ptB, dir ){

        var ABdotB = ptB.normSq() - ptB.dot( ptA )
            ,ABdotA = ptB.dot( ptA ) - ptA.normSq()
            ;

        // if the origin is farther than either of these points
        // get the direction from one of those points to the origin
        if ( ABdotB &lt; 0 ){

            return dir.clone( ptB ).negate();

        } else if ( ABdotA &gt; 0 ){

            return dir.clone( ptA ).negate();

        // otherwise, use the perpendicular direction from the simplex
        } else {

            // dir = AB = B - A
            dir.clone( ptB ).vsub( ptA );
            // if (left handed coordinate system) 
            // A cross AB &lt; 0 then get perpendicular counter clockwise 
            return dir.perp( (ptA.cross( dir ) &lt; 0) );
        }
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="getClosestPoints">getClosestPoints</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>getClosestPoints()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">simplex</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Figure out the closest points on the original objects<br />from the last two entries of the simplex</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var getClosestPoints = function getClosestPoints( simplex ){

        // see http://www.codezealot.org/archives/153
        // for algorithm details

        // we know that the position of the last point 
        // is very close to the previous. (by nature of the distance test)
        // this won't give great results for the closest
        // points algorithm, so let's use the previous two
        var len = simplex.length
            ,last = simplex[ len - 2 ]
            ,prev = simplex[ len - 3 ]
            ,scratch = Physics.scratchpad()
            ,A = scratch.vector().clone( last.pt )
            // L = B - A
            ,L = scratch.vector().clone( prev.pt ).vsub( A )
            ,lambdaB
            ,lambdaA
            ;

        if ( L.equals(Physics.vector.zero) ){

            // oh.. it's a zero vector. So A and B are both the closest.
            // just use one of them
            scratch.done();
            return {

                a: last.a,
                b: last.b
            };
        }

        lambdaB = - L.dot( A ) / L.normSq();
        lambdaA = 1 - lambdaB;

        if ( lambdaA &lt;= 0 ){
            // woops.. that means the closest simplex point
            // isn't on the line it's point B itself
            scratch.done();
            return {
                a: prev.a,
                b: prev.b
            };
        } else if ( lambdaB &lt;= 0 ){
            // vice versa
            scratch.done();
            return {
                a: last.a,
                b: last.b
            };
        }

        // guess we'd better do the math now...
        var ret = {
            // a closest = lambdaA * Aa + lambdaB * Ba
            a: A.clone( last.a ).mult( lambdaA ).vadd( L.clone( prev.a ).mult( lambdaB ) ).values(),
            // b closest = lambdaA * Ab + lambdaB * Bb
            b: A.clone( last.b ).mult( lambdaA ).vadd( L.clone( prev.b ).mult( lambdaB ) ).values()
        };

        scratch.done();
        return ret;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="gjk">gjk</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>gjk()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">support</span><span class="description">The support function. Must return an object containing </span></li><li class="tag"><span class="type">@: </span><span class="string">the witness points (.a, .b) and the support point (.pt).</span></li><li class="tag"><span class="type">@: </span><span class="string">Recommended to use simple objects. Eg: return { a: {x: 1, y:2}, b: {x: 3, y: 4}, pt: {x: 2, y: 2} }</span></li><li class="tag"><span class="type">@: </span><span class="string">Signature: function(&lt;Physics.vector&gt; axis).</span></li><li class="tag"><span class="type">@: </span><span class="string">axis: The axis to use</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Physics.vector}</span><span class="name">seed</span><span class="description">The starting direction for the simplex</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description">The algorithm information containing properties: .overlap (bool), and .simplex (Array)</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Implementation agnostic GJK function.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var gjk = function gjk( support, seed, checkOverlapOnly, debugFn ){

        var overlap = false
            ,noOverlap = false // if we're sure we're not overlapping
            ,distance = false
            ,simplex = []
            ,simplexLen = 1
            // setup a scratchpad of temporary cheap objects
            ,scratch = Physics.scratchpad()
            // use seed as starting direction or use x axis
            ,dir = scratch.vector().clone(seed || Physics.vector.axis[ 0 ])
            ,last = scratch.vector()
            ,lastlast = scratch.vector()
            // some temp vectors
            ,v1 = scratch.vector()
            ,v2 = scratch.vector()
            ,ab
            ,ac
            ,sign
            ,tmp
            ,iterations = 0
            ;

        // get the first Minkowski Difference point
        tmp = support( dir );
        simplexLen = simplex.push( tmp );
        last.clone( tmp.pt );
        // negate d for the next point
        dir.negate();

        // start looping
        while ( ++iterations ) {

            // swap last and lastlast, to save on memory/speed
            last.swap(lastlast);
            // push a new point to the simplex because we haven't terminated yet
            tmp = support( dir );
            simplexLen = simplex.push( tmp );
            last.clone( tmp.pt );

            if ( debugFn ){
                debugFn( simplex );
            }

            if ( last.equals(Physics.vector.zero) ){
                // we happened to pick the origin as a support point... lucky.
                overlap = true;
                break;
            }
            
            // check if the last point we added actually passed the origin
            if ( !noOverlap &amp;&amp; last.dot( dir ) &lt;= 0.0 ) {
                // if the point added last was not past the origin in the direction of d
                // then the Minkowski difference cannot possibly contain the origin since
                // the last point added is on the edge of the Minkowski Difference

                // if we just need the overlap...
                if ( checkOverlapOnly ){
                    break;
                }

                noOverlap = true;
            }

            // if it's a line...
            if ( simplexLen === 2 ){

                // otherwise we need to determine if the origin is in
                // the current simplex and act accordingly

                dir = getNextSearchDir( last, lastlast, dir );
                // continue...

            // if it's a triangle... and we're looking for the distance
            } else if ( noOverlap ){

                // if we know there isn't any overlap and
                // we're just trying to find the distance...
                // make sure we're getting closer to the origin
                dir.normalize();
                tmp = lastlast.dot( dir );
                if ( Math.abs(tmp - last.dot( dir )) &lt; gjkAccuracy ){

                    distance = -tmp;
                    break;
                }

                // if we are still getting closer then only keep
                // the points in the simplex that are closest to
                // the origin (we already know that last is closer
                // than the previous two)
                // the norm is the same as distance(origin, a)
                // use norm squared to avoid the sqrt operations
                if (lastlast.normSq() &lt; v1.clone(simplex[ 0 ].pt).normSq()) {
                    
                    simplex.shift();

                } else {
                    
                    simplex.splice(1, 1);
                }

                dir = getNextSearchDir( v1.clone(simplex[ 1 ].pt), v2.clone(simplex[ 0 ].pt), dir );
                // continue...

            // if it's a triangle
            } else {

                // we need to trim the useless point...

                ab = ab || scratch.vector();
                ac = ac || scratch.vector();

                // get the edges AB and AC
                ab.clone( lastlast ).vsub( last );
                ac.clone( simplex[ 0 ].pt ).vsub( last );

                // here normally people think about this as getting outward facing
                // normals and checking dot products. Since we're in 2D
                // we can be clever...
                sign = ab.cross( ac ) &gt; 0;
                
                if ( sign ^ (last.cross( ab ) &gt; 0) ){

                    // ok... so there's an XOR here... don't freak out
                    // remember last = A = -AO
                    // if AB cross AC and AO cross AB have the same sign
                    // then the origin is along the outward facing normal of AB
                    // so if AB cross AC and A cross AB have _different_ (XOR) signs
                    // then this is also the case... so we proceed...

                    // point C is dead to us now...
                    simplex.shift();

                    // if we haven't deduced that we've enclosed the origin
                    // then we know which way to look...
                    // morph the ab vector into its outward facing normal
                    ab.perp( sign );
                    
                    // swap
                    dir.swap( ab );
                    
                    // continue...

                    // if we get to this if, then it means we can continue to look along
                    // the other outward normal direction (ACperp)
                    // if we don't see the origin... then we must have it enclosed
                } else if ( sign ^ (ac.cross( last ) &gt; 0) ){
                    // then the origin is along the outward facing normal 
                    // of AC; (ACperp)

                    // point B is dead to us now...
                    simplex.splice(1, 1);

                    ac.perp( !sign );
                    
                    // swap
                    dir.swap( ab );
                    
                    // continue...

                } else {

                    // we have enclosed the origin!
                    overlap = true;
                    // fewf... take a break
                    break;
                }
            }

            // woah nelly... that's a lot of iterations.
            // Stop it!
            if (iterations &gt; gjkMaxIterations){
                scratch.done();
                return {
                    simplex: simplex,
                    iterations: iterations,
                    distance: 0,
                    maxIterationsReached: true
                };
            }
        }

        // free workspace
        scratch.done();

        tmp = {
            overlap: overlap,
            simplex: simplex,
            iterations: iterations
        };

        if ( distance !== false ){

            tmp.distance = distance;
            tmp.closest = getClosestPoints( simplex );
        }

        return tmp;
    };

    Physics.gjk = gjk;

})();

// ---
// inside: src/math/transform.js

(function(){</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@class: </span><span class="string">Transform</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Vector Transformations class for rotating and translating vectors</p></div></div></div></article><article class="comment"><header><h1 id="Transform">Transform</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>Transform()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.vector,Physics.transform}</span><span class="name">vect</span><span class="description">(optional) vector to use for translation or a transform to copy</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">angle</span><span class="description">(optional) Angle (radians) to use for rotation</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">origin</span><span class="description">(optional) Origin of the rotation</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Transform Constructor / Factory</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var Transform = function Transform( vect, angle, origin ) {

        if (!(this instanceof Transform)){
            return new Transform( vect, angle );
        }

        this.v = Physics.vector();
        this.o = Physics.vector(); // origin of rotation
        
        if ( vect instanceof Transform ){

            this.clone( vect );
            return;
        }

        if (vect){
            this.setTranslation( vect );
        }

        this.setRotation( angle || 0, origin );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="setTranslation">setTranslation</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Transform.prototype.setTranslation()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.vector}</span><span class="name">vect</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Set the translation portion of the transform</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Transform.prototype.setTranslation = function( vect ){

        this.v.clone( vect );
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="setRotation">setRotation</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Transform.prototype.setRotation()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">angle</span><span class="description"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">origin</span><span class="description">(optional) Origin of the rotation</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Set the rotation portion of the transform</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Transform.prototype.setRotation = function( angle, origin ){

        this.cosA = Math.cos( angle );
        this.sinA = Math.sin( angle );

        if ( origin ){
            this.o.clone( origin );
        } else {
            this.o.zero();
        }

        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="clone">clone</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Transform.prototype.clone()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.transform}</span><span class="name">t</span><span class="description">(optional) the transform to clone</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Physics.transform,this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Clone another transform. Or clone self into new transform.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Transform.prototype.clone = function( t ){

        if ( t ){

            this.setTranslation( t.v );
            this.cosA = t.cosA;
            this.sinA = t.sinA;
            this.o.clone( t.o );

            return this;
        }

        return new Transform( this );
    };

    Physics.transform = Transform;

})();

// ---
// inside: src/math/vector.js

(function(window){

    // http://jsperf.com/vector-storage-test/2

    // cached math functions
    // TODO: might be faster not to do this???
    var sqrt = Math.sqrt
        ,min = Math.min
        ,max = Math.max
        ,acos = Math.acos
        ,atan2 = Math.atan2
        ,TWOPI = Math.PI * 2
        ,typedArrays = !!window.Float64Array
        ;</code></pre></div></div></div></article><article class="comment"><header><h1 id="Vector">Vector</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>Vector()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Number,Physics.vector}</span><span class="name">x</span><span class="description">(optional) Either the x coord. Or a vector to copy.</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">y</span><span class="description">(optional) The y coord.</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Vector Constructor / Factory</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var Vector = function Vector(x, y) {

        // enforce instantiation
        if ( !(this instanceof Vector) ){

            return new Vector( x, y );
        }

        // arrays to store values
        // x = _[0]
        // y = _[1]
        // norm = _[3]
        // normsq = _[4]
        

        if (typedArrays){
            this._ = new Float64Array(5);
        } else {
            this._ = [];
        }

        if (x &amp;&amp; (x.x !== undefined || x._ &amp;&amp; x._.length)){

            this.clone( x );

        } else {

            this.recalc = true; //whether or not recalculate norms
            this.set( x || 0.0, y || 0.0 );
        }
    };</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Methods</p></div></div></div></article><article class="comment"><header><h1 id="set">set</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.set()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Sets the components of this Vector.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.set = function(x, y) {

        this.recalc = true;

        this._[0] = x || 0.0;
        this._[1] = y || 0.0;
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="get">get</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.get()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Integer}</span><span class="name">n</span><span class="description">The nth component. x is 1, y is 2, ...</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Integer}</span><span class="description">component value</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get component</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.get = function( n ){

        return this._[ n ];
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="vadd">vadd</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.vadd()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Add Vector to this</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.vadd = function(v) {

        this.recalc = true;

        this._[0] += v._[0];
        this._[1] += v._[1];
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="vsub">vsub</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.vsub()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Subtract Vector from this</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.vsub = function(v) {

        this.recalc = true;

        this._[0] -= v._[0];
        this._[1] -= v._[1];
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="add">add</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.add()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Add scalars to Vector's components</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.add = function(x, y){
        
        this.recalc = true;

        this._[0] += x;
        this._[1] += y === undefined? x : y;
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="sub">sub</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.sub()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Subtract scalars to Vector's components</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.sub = function(x, y){
        
        this.recalc = true;

        this._[0] -= x;
        this._[1] -= y === undefined? x : y;
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="mult">mult</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.mult()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Multiply by a scalar</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.mult = function(m) {
        
        if ( !this.recalc ){

            this._[4] *= m * m;
            this._[3] *= m;
        }

        this._[0] *= m;
        this._[1] *= m;
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="dot">dot</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.dot()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the dot product</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.dot = function(v) {

        return (this._[0] * v._[0]) + (this._[1] * v._[1]);
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="cross">cross</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.cross()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the cross product (in a left handed coordinate system)</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.cross = function(v) {

        return ( - this._[0] * v._[1]) + (this._[1] * v._[0]);
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="proj">proj</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.proj()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Scalar projection of this along v</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.proj = function(v){

        return this.dot( v ) / v.norm();
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="vproj">vproj</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.vproj()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Vector project this along v</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.vproj = function(v){

        var m = this.dot( v ) / v.normSq();
        return this.clone( v ).mult( m );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="angle">angle</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.angle()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">v</span><span class="description">(optional) other vector</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Number}</span><span class="description">Angle in radians</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Angle between this and vector. Or this and x axis.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.angle = function(v){

        var ang;

        if ( this.equals( Vector.zero ) ){
            
            if ( v ){
                return v.angle();
            } else {
                return NaN;
            }

        } else {

            if ( v &amp;&amp; !v.equals( Vector.zero ) ){
                ang = atan2( this._[1] * v._[0] - this._[0] * v._[1], this._[0] * v._[0] + this._[1] * v._[1]);
            } else {
                ang = atan2( this._[ 1 ], this._[ 0 ] );    
            }
        }
        
        while (ang &gt; Math.PI){
            ang -= TWOPI;
        }

        while (ang &lt; -Math.PI){
            ang += TWOPI;
        }

        return ang;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="angle2">angle2</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.angle2()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">v</span><span class="description">(optional) other vector</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Number}</span><span class="description">Angle in radians</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Angle created between three points; left -> this -> right.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.angle2 = function( left, right ){

        var x1 = left._[0] - this._[0]
            ,y1 = left._[1] - this._[1]
            ,x2 = right._[0] - this._[0]
            ,y2 = right._[1] - this._[1]
            ,ang = atan2( y1 * x2 - x1 * y2, x1 * x2 + y1 * y2)
            ;

        while (ang &gt; Math.PI){
            ang -= TWOPI;
        }

        while (ang &lt; -Math.PI){
            ang += TWOPI;
        }

        return ang;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="norm">norm</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.norm()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the norm (length)</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.norm = function() {

        if (this.recalc){
            this.recalc = false;
            this._[4] = (this._[0] * this._[0] + this._[1] * this._[1]);
            this._[3] = sqrt( this._[4] );
        }
        
        return this._[3];
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="normSq">normSq</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.normSq()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the norm squared</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.normSq = function() {

        if (this.recalc){
            this.recalc = false;
            this._[4] = (this._[0] * this._[0] + this._[1] * this._[1]);
            this._[3] = sqrt( this._[4] );
        }

        return this._[4];
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="dist">dist</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.dist()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get distance to other Vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.dist = function(v) {
      
        var dx, dy;
        return sqrt(
            (dx = (v._[0] - this._[0])) * dx + 
            (dy = (v._[1] - this._[1])) * dy
        );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="distSq">distSq</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.distSq()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get distance squared to other Vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.distSq = function(v) {

        var dx, dy;
        return (
            (dx = (v._[0] - this._[0])) * dx + 
            (dy = (v._[1] - this._[1])) * dy
        );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="perp">perp</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.perp()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Boolean}</span><span class="name">neg</span><span class="description">Set to true if want to go in the negative direction</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Change vector into a vector perpendicular</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.perp = function( neg ) {

        var tmp = this._[0]
            ;

        if ( neg ){

            // x &lt;-&gt; y
            // negate x
            this._[0] = -this._[1];
            this._[1] = tmp;
            
        } else {

            // x &lt;-&gt; y
            // negate y
            this._[0] = this._[1];
            this._[1] = -tmp;
        }

        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="normalize">normalize</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.normalize()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Normalises this Vector, making it a unit Vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.normalize = function() {

        var m = this.norm();

        // means it's a zero Vector
        if ( m === 0 ){
            return this;
        }

        m = 1/m;

        this._[0] *= m;
        this._[1] *= m;

        this._[3] = 1.0;
        this._[4] = 1.0;

        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="transform">transform</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.transform()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.transform}</span><span class="name">t</span><span class="description">The transform</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply a transform to this vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.transform = function( t ){

        var sinA = t.sinA
            ,cosA = t.cosA
            ,x = t.o._[ 0 ]
            ,y = t.o._[ 1 ]
            ;

        this._[ 0 ] -= x;
        this._[ 1 ] -= y;

        // rotate about origin &quot;o&quot; then translate
        return this.set(
            this._[ 0 ] * cosA - this._[ 1 ] * sinA + x + t.v._[ 0 ], 
            this._[ 0 ] * sinA + this._[ 1 ] * cosA + y + t.v._[ 1 ]
        );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="transformInv">transformInv</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.transformInv()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.transform}</span><span class="name">t</span><span class="description">The transform</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply an inverse transform to this vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.transformInv = function( t ){

        var sinA = t.sinA
            ,cosA = t.cosA
            ,x = t.o._[ 0 ]
            ,y = t.o._[ 1 ]
            ;

        this._[ 0 ] -= x + t.v._[ 0 ];
        this._[ 1 ] -= y + t.v._[ 1 ];

        // inverse translate then inverse rotate about origin &quot;o&quot;
        return this.set(
            this._[ 0 ] * cosA + this._[ 1 ] * sinA + x, 
            - this._[ 0 ] * sinA + this._[ 1 ] * cosA + y
        );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="rotate">rotate</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.rotate()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.transform,Number}</span><span class="name">t</span><span class="description">The transform OR a number representing the angle to rotate by</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">o</span><span class="description">If number is specified for rotation angle, then this is a vector representing the rotation origin</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply the rotation portion of transform to this vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.rotate = function( t, o ){

        var sinA
            ,cosA
            ,x = 0
            ,y = 0
            ;

        if ( typeof t === 'number' ){
            sinA = Math.sin( t );
            cosA = Math.cos( t );

            if ( o ){
                x = (o.x || o._[ 0 ]) | 0;
                y = (o.y || o._[ 1 ]) | 0;
            }
        } else {
            sinA = t.sinA;
            cosA = t.cosA;
        
            x = t.o._[ 0 ];
            y = t.o._[ 1 ];
        }
            
        this._[ 0 ] -= x;
        this._[ 1 ] -= y;

        return this.set(
            this._[ 0 ] * cosA - this._[ 1 ] * sinA + x, 
            this._[ 0 ] * sinA + this._[ 1 ] * cosA + y
        );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="rotateInv">rotateInv</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.rotateInv()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.transform}</span><span class="name">t</span><span class="description">The transform</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply an inverse rotation portion of transform to this vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.rotateInv = function( t ){

        return this.set(
            (this._[ 0 ] - t.o._[ 0 ]) * t.cosA + (this._[ 1 ] - t.o._[ 1 ]) * t.sinA + t.o._[ 0 ], 
            -(this._[ 0 ] - t.o._[ 0 ]) * t.sinA + (this._[ 1 ] - t.o._[ 1 ]) * t.cosA + t.o._[ 1 ]
        );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="translate">translate</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.translate()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.transform}</span><span class="name">t</span><span class="description">The transform</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply the translation portion of transform to this vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.translate = function( t ){

        return this.vadd( t.v );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="translateInv">translateInv</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.translateInv()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Physics.transform}</span><span class="name">t</span><span class="description">The transform</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply an inverse translation portion of transform to this vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.translateInv = function( t ){

        return this.vsub( t.v );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="clone">clone</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.clone()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Returns clone of current Vector<br />Or clones provided Vector to this one</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.clone = function(v) {
        
        // http://jsperf.com/vector-storage-test

        if (v){

            if (!v._){

                return this.set( v.x, v.y );
            }
            
            this.recalc = v.recalc;

            if (!v.recalc){
                this._[3] = v._[3];
                this._[4] = v._[4];
            }

            this._[0] = v._[0];
            this._[1] = v._[1];

            return this;
        }

        return new Vector( this );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="swap">swap</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.swap()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">v</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Swap values with other vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.swap = function(v){

        var _ = this._;
        this._ = v._;
        v._ = _;

        _ = this.recalc;
        this.recalc = v.recalc;
        v.recalc = _;
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="values">values</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.values()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Create a litteral object</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.values = function(){

        return {
            x: this._[0],
            y: this._[1]
        };
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="zero">zero</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.zero()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Zero the Vector</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.zero = function() {

        this._[3] = 0.0;
        this._[4] = 0.0;

        this._[0] = 0.0;
        this._[1] = 0.0;
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="negate">negate</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.negate()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Make this a Vector in the opposite direction</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.negate = function( component ){

        if (component !== undefined){

            this._[ component ] = -this._[ component ];
            return this;
        }

        this._[0] = -this._[0];
        this._[1] = -this._[1];
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="clamp">clamp</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.clamp()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Constrain Vector components to minima and maxima</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.clamp = function(minV, maxV){

        minV = minV.values ? minV.values() : minV;
        maxV = maxV.values ? maxV.values() : maxV;

        this._[0] = min(max(this._[0], minV.x), maxV.x);
        this._[1] = min(max(this._[1], minV.y), maxV.y);
        this.recalc = true;
        return this;
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="toString">toString</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.toString()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Render string</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.toString = function(){

        return '('+this._[0] + ', ' + this._[1]+')';
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="equals">equals</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.prototype.equals()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">v</span><span class="description"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{boolean}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Determine if equal</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.prototype.equals = function(v){

        return this._[0] === v._[0] &amp;&amp;
            this._[1] === v._[1] &amp;&amp;
            this._[2] === v._[2];
    };</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Static functions</p></div></div></div></article><article class="comment"><header><h1 id="vadd">vadd</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.vadd()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Return sum of two Vectors</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.vadd = function(v1, v2) {

        return new Vector( v1._[0] + v2._[0], v1._[1] + v2._[1] );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="vsub">vsub</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.vsub()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Subtract v2 from v1</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.vsub = function(v1, v2) {

        return new Vector( v1._[0] - v2._[0], v1._[1] - v2._[1] );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="mult">mult</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.mult()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Multiply v1 by a scalar m</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.mult = function(m, v1){

        return new Vector( v1._[0]*m, v1._[1]*m );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="vproj">vproj</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Vector.vproj()</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Project v1 onto v2</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.vproj = function(v1, v2) {

        return Vector.mult( v1.dot(v2) / v2.normSq(), v2 );
    };</code></pre></div></div></div></article><article class="comment"><header><h1 id="axis">axis</h1><h5 class="subheader"><div class="label radius ctx-type">property</div>Vector.axis</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@type: </span><span class="types">{Array}</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Axis vectors for general reference</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.axis = [
        new Vector(1.0, 0.0),
        new Vector(0.0, 1.0)
    ];</code></pre></div></div></div></article><article class="comment"><header><h1 id="zero">zero</h1><h5 class="subheader"><div class="label radius ctx-type">property</div>Vector.zero</h5></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Zero vector for reference</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Vector.zero = new Vector(0, 0);

    // assign
    Physics.vector = Vector;

}(this)); // end Vector class


// ---
// inside: src/core/behavior.js

(function(){

    // Service
    Physics.behavior = Physics.behaviour = Decorator('behavior', {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@type: </span><span class="types">{Number}</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Priority for behavior pubsub event</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">priority: 0,</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">options</span><span class="description">Config options passed by initializer</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialization</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">init: function(){
            
            this.options = {};
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">world</span><span class="description">The world to connect to</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Connect to world. Automatically called when added to world by the setWorld method</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">connect: function( world ){

            if (this.behave){
                world.subscribe('integrate:positions', this.behave, this, this.priority);
            }
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">world</span><span class="description">The world to disconnect from</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Disconnect from world</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">disconnect: function( world ){

            if (this.behave){
                world.unsubscribe('integrate:positions', this.behave);
            }
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@abstract: </span><span class="string"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">data</span><span class="description">Object containing event data, including: data.bodies = Array of world bodies to act on, data.dt = the timestep size</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Default method run on every world integration</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">behave: null
    });

}());

// ---
// inside: src/core/body.js

(function(){

    var defaults = {

        // is the body fixed and imovable?
        fixed: false,
        // body mass
        mass: 1.0,
        // body restitution. How &quot;bouncy&quot; is it?
        restitution: 1.0,
        // what is its coefficient of friction with another surface with COF = 1?
        cof: 0.8,
        // what is the view object (mixed) that should be used when rendering?
        view: null
    };

    Physics.body = Decorator('body', {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">options</span><span class="description">Config options passed by initializer</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialization</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">init: function( options ){

            var vector = Physics.vector;

            this.options = Physics.util.extend({}, defaults, options);

            // properties
            this.fixed = this.options.fixed;
            this.hidden = this.options.hidden;
            this.mass = this.options.mass;
            this.restitution = this.options.restitution;
            this.cof = this.options.cof;

            // placeholder for renderers
            this.view = this.options.view;

            // physical properties
            this.state = {
                pos: vector( options.x, options.y ),
                vel: vector( options.vx, options.vy ),
                acc: vector(),
                angular: {
                    pos: options.angle || 0.0,
                    vel: options.angularVelocity || 0.0,
                    acc: 0.0
                },
                old: {
                    pos: vector(),
                    vel: vector(),
                    acc: vector(),
                    angular: {
                        pos: 0.0,
                        vel: 0.0,
                        acc: 0.0
                    }
                }
            };

            if (this.mass === 0){
                throw &quot;Error: Bodies must have non-zero mass&quot;;
            }

            // shape
            this.geometry = Physics.geometry('point');
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">acc</span><span class="description">The acceleration vector</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Accelerate the body by adding supplied vector to its current acceleration</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">accelerate: function( acc ){

            this.state.acc.vadd( acc );
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">force</span><span class="description">The force vector</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">p</span><span class="description">(optional) The point vector from the COM at which to apply the force</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Apply a force at center of mass, or at point "p" relative to the center of mass</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">applyForce: function( force, p ){

            var scratch = Physics.scratchpad()
                ,r = scratch.vector()
                ,state
                ;
                
            // if no point at which to apply the force... apply at center of mass
            if ( !p ){
                
                this.accelerate( r.clone( force ).mult( 1/this.mass ) );

            } else if ( this.moi ) {

                // apply torques
                state = this.state;
                r.clone( p );
                // r cross F
                this.state.angular.acc -= r.cross( force ) / this.moi;
                // projection of force towards center of mass
                this.applyForce( force );

            }

            scratch.done();

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description">The aabb values</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the Axis aligned bounding box for the body in its current position and rotation</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">aabb: function(){

            var scratch = Physics.scratchpad()
                ,trans = scratch.transform()
                ,angle = this.state.angular.pos
                ,aabb = scratch.aabb().set( this.geometry.aabb( angle ) )
                ;

            trans.setRotation( 0 ).setTranslation(this.state.pos);
            aabb.transform( trans );

            aabb = aabb.get();
            scratch.done();
            return aabb;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@abstract: </span><span class="string"></span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Recalculate properties. Call when body physical properties are changed.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">recalc: function(){
            // override to recalculate properties
        }
    });

}());

// ---
// inside: src/core/geometry.js

(function(){

    Physics.geometry = Decorator('geometry', {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">options</span><span class="description">Config options passed by initializer</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialization</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">init: function( options ){

            this._aabb = new Physics.aabb();
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">angle</span><span class="description">(optional) The angle to rotate the geometry.</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Object}</span><span class="description">Bounding box values</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get axis-aligned bounding box for this object (rotated by angle if specified).</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">aabb: function( angle ){

            return this._aabb.get();
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">dir</span><span class="description">Direction to look</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">result</span><span class="description">(optional) A vector to write result to</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Vector}</span><span class="description">The farthest hull point in local coordinates</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get farthest point on the hull of this geometry<br />along the direction vector "dir"<br />returns local coordinates<br />replaces result if provided</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">getFarthestHullPoint: function( dir, result ){

            result = result || Physics.vector();

            // not implemented.
            return result.set( 0, 0 );
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">dir</span><span class="description">Direction to look</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vector}</span><span class="name">result</span><span class="description">(optional) A vector to write result to</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Vector}</span><span class="description">The farthest core point in local coordinates</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get farthest point on the core of this geometry<br />along the direction vector "dir"<br />returns local coordinates<br />replaces result if provided</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">getFarthestCorePoint: function( dir, result, margin ){

            result = result || Physics.vector();

            // not implemented.
            return result.set( 0, 0 );
        }
    });

}());

// ---
// inside: src/core/geometry-helpers.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Geometry helper functions</p></div></div></div></article><article class="comment"><header><h1 id="isPolygonConvex">isPolygonConvex</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.geometry.isPolygonConvex()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">hull</span><span class="description">Array of vertices (Vectorish)</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Boolean}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Determine if polygon hull is convex</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.geometry.isPolygonConvex = function( hull ){

    var scratch = Physics.scratchpad()
        ,prev = scratch.vector()
        ,next = scratch.vector()
        ,tmp = scratch.vector()
        ,ret = true
        ,sign = false
        ,l = hull.length
        ;

    if ( !hull || !l ){
        return false;
    }

    if ( l &lt; 3 ){
        // it must be a point or a line...
        // which are convex
        scratch.done();
        return ret;
    }

    prev.clone( hull[ 0 ] ).vsub( tmp.clone( hull[ l - 1 ] ) );

    // loop over the edges of the hull and construct vectors of the current
    // edge and retain the last edge
    // add two to the length to do a full cycle
    for ( var i = 1; i &lt;= l; ++i ){
        
        next.clone( hull[ i % l ] ).vsub( tmp.clone( hull[ (i - 1) % l ] ) );

        if ( sign === false ){

            // first check the sign of the first cross product
            sign = prev.cross( next );

        } else if ( (sign &gt; 0) ^ (prev.cross( next ) &gt; 0) ){
        
            // if the cross products are different signs it's not convex
            ret = false;
            break;
        }

        // remember the last edge
        next.swap( prev );
    }

    scratch.done();
    return ret;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="getPolygonMOI">getPolygonMOI</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.geometry.getPolygonMOI()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@see:: </span><span class="string">http://en.wikipedia.org/wiki/List_of_moments_of_inertia</span></li><li class="tag"><span class="type">@assumptions:: </span><span class="string"></span></li><li class="tag"><span class="type">@: </span><span class="string">* mass is unitary</span></li><li class="tag"><span class="type">@: </span><span class="string">* axis of rotation is the origin</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">hull</span><span class="description">Array of vertices (vectorish)</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Number}</span><span class="description">The polygon MOI</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Gets the moment of inertia of a convex polygon</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.geometry.getPolygonMOI = function( hull ){

    var scratch = Physics.scratchpad()
        ,prev = scratch.vector()
        ,next = scratch.vector()
        ,num = 0
        ,denom = 0
        ,tmp
        ,l = hull.length
        ;

    if ( l &lt; 2 ){
        // it must be a point
        // moi = 0
        scratch.done();
        return 0;
    }

    if ( l === 2 ){
        // it's a line
        // get length squared
        tmp = next.clone( hull[ 1 ] ).distSq( prev.clone( hull[ 0 ] ) );
        scratch.done();
        return tmp / 12;
    }

    prev.clone( hull[ 0 ] );

    for ( var i = 1; i &lt; l; ++i ){
        
        next.clone( hull[ i ] );

        tmp = Math.abs( next.cross( prev ) );
        num += tmp * ( next.normSq() + next.dot( prev ) + prev.normSq() );
        denom += tmp;

        prev.swap( next );
    }

    scratch.done();
    return num / ( 6 * denom );
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="isPointInPolygon">isPointInPolygon</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.geometry.isPointInPolygon()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">pt</span><span class="description"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">hull</span><span class="description">Array of vertices (Vectorish)</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Boolean}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Check if point is inside polygon hull</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.geometry.isPointInPolygon = function( pt, hull ){

    var scratch = Physics.scratchpad()
        ,point = scratch.vector().clone( pt )
        ,prev = scratch.vector()
        ,next = scratch.vector()
        ,ang = 0
        ,l = hull.length
        ;

    if ( l &lt; 2 ){
        // it's a point...
        ang = point.equals( prev.clone( hull[ 0 ] ));
        scratch.done();
        return ang;
    }

    if ( l === 2 ){
        // it's a line
        ang = point.angle( prev.clone( hull[ 0 ] ));
        ang += point.angle( prev.clone( hull[ 1 ] ));
        scratch.done();
        return ( Math.abs(ang) === Math.PI );
    }

    prev.clone( hull[ 0 ] ).vsub( point );

    // calculate the sum of angles between vector pairs
    // from point to vertices
    for ( var i = 1; i &lt;= l; ++i ){
        
        next.clone( hull[ i % l ] ).vsub( point );
        ang += next.angle( prev );
        prev.swap( next );
    }

    scratch.done();
    return ( Math.abs(ang) &gt; 0 );
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="getPolygonArea">getPolygonArea</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.geometry.getPolygonArea()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">hull</span><span class="description">Array of vertices</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Number}</span><span class="description">Area (positive for clockwise ordering)</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the signed area of the polygon</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.geometry.getPolygonArea = function getPolygonArea( hull ){

    var scratch = Physics.scratchpad()
        ,prev = scratch.vector()
        ,next = scratch.vector()
        ,ret = 0
        ,l = hull.length
        ;

    if ( l &lt; 3 ){
        // it must be a point or a line
        // area = 0
        scratch.done();
        return 0;
    }

    prev.clone( hull[ l - 1 ] );

    for ( var i = 0; i &lt; l; ++i ){
        
        next.clone( hull[ i ] );

        ret += prev.cross( next );

        prev.swap( next );
    }

    scratch.done();
    return ret / 2;
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="getPolygonCentroid">getPolygonCentroid</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.geometry.getPolygonCentroid()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">hull</span><span class="description">Polygon hull definition</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Vector}</span><span class="description">centroid</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the coordinates of the centroid</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.geometry.getPolygonCentroid = function getPolygonCentroid( hull ){

    var scratch = Physics.scratchpad()
        ,prev = scratch.vector()
        ,next = scratch.vector()
        ,ret = Physics.vector()
        ,tmp
        ,l = hull.length
        ;

    if ( l &lt; 2 ){
        // it must be a point
        scratch.done();
        return Physics.vector( hull[0] );
    }

    if ( l === 2 ){
        // it's a line
        // get the midpoint
        scratch.done();
        return Physics.vector((hull[ 1 ].x + hull[ 0 ].x)/2, (hull[ 1 ].y + hull[ 0 ].y)/2 );
    }

    prev.clone( hull[ l - 1 ] );

    for ( var i = 0; i &lt; l; ++i ){
        
        next.clone( hull[ i ] );

        tmp = prev.cross( next );
        prev.vadd( next ).mult( tmp );
        ret.vadd( prev );

        prev.swap( next );
    }

    tmp = 1 / (6 * Physics.geometry.getPolygonArea( hull ));

    scratch.done();
    return ret.mult( tmp );
};</code></pre></div></div></div></article><article class="comment"><header><h1 id="nearestPointOnLine">nearestPointOnLine</h1><h5 class="subheader"><div class="label radius ctx-type">method</div>Physics.geometry.nearestPointOnLine()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">pt</span><span class="description">The point</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">linePt1</span><span class="description">The first endpoint of the line</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Vectorish}</span><span class="name">linePt2</span><span class="description">The second endpoint of the line</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Vector}</span><span class="description">The closest point</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get the closest point on a discrete line to specified point.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.geometry.nearestPointOnLine = function nearestPointOnLine( pt, linePt1, linePt2 ){

    var scratch = Physics.scratchpad()
        ,p = scratch.vector().clone( pt )
        ,A = scratch.vector().clone( linePt1 ).vsub( p )
        ,L = scratch.vector().clone( linePt2 ).vsub( p ).vsub( A )
        ,lambdaB
        ,lambdaA
        ;

    if ( L.equals(Physics.vector.zero) ){
        // oh.. it's a zero vector. So A and B are both the closest.
        // just use one of them
        scratch.done();
        return Physics.vector( linePt1 );
    }

    lambdaB = - L.dot( A ) / L.normSq();
    lambdaA = 1 - lambdaB;

    if ( lambdaA &lt;= 0 ){
        // woops.. that means the closest simplex point
        // isn't on the line it's point B itself
        scratch.done();
        return Physics.vector( linePt2 );
    } else if ( lambdaB &lt;= 0 ){
        // vice versa
        scratch.done();
        return Physics.vector( linePt1 );
    }

    // guess we'd better do the math now...
    p = Physics.vector( linePt2 ).mult( lambdaB ).vadd( A.clone( linePt1 ).mult( lambdaA ) );
    scratch.done();
    return p;
};



// ---
// inside: src/core/integrator.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Base integrator definition</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">(function(){

    var defaults = {

        // drag applied during integration
        // 0 means vacuum
        // 0.9 means molasses
        drag: 0
    };

    Physics.integrator = Decorator('integrator', {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">options</span><span class="description">Config options passed by initializer</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialization</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">init: function( options ){
            
            this.options = Physics.util.extend({}, defaults, options);
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">bodies</span><span class="description">List of bodies to integrate</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">dt</span><span class="description">Timestep size</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Integrate bodies by timestep</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">integrate: function( bodies, dt ){

            var world = this._world;

            this.integrateVelocities( bodies, dt );
            
            if ( world ){
                world.publish({
                    topic: 'integrate:velocities',
                    bodies: bodies,
                    dt: dt
                });
            }

            this.integratePositions( bodies, dt );
            
            if ( world ){
                world.publish({
                    topic: 'integrate:positions',
                    bodies: bodies,
                    dt: dt
                });
            }

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@abstract: </span><span class="string"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">bodies</span><span class="description">List of bodies to integrate</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">dt</span><span class="description">Timestep size</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Just integrate the velocities</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">integrateVelocities: function( bodies, dt ){

            throw 'The integrator.integrateVelocities() method must be overriden';
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@abstract: </span><span class="string"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">bodies</span><span class="description">List of bodies to integrate</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">dt</span><span class="description">Timestep size</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Just integrate the positions</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">integratePositions: function( bodies, dt ){

            throw 'The integrator.integratePositions() method must be overriden';
        }
    });

}());

// ---
// inside: src/core/renderer.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Base renderer class definition</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">(function(){

    var defaults = {
        // draw meta data (fps, steps, etc)
        meta: false,
        // refresh rate of meta info
        metaRefresh: 200,

        // width of viewport
        width: 600,
        // height of viewport
        height: 600
    };

    // Service
    Physics.renderer = Decorator('renderer', {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">options</span><span class="description">Options passed to the initializer</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialization</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">init: function( options ){

            var el = typeof options.el === 'string' ? document.getElementById(options.el) : options.el
                ;

            this.options = Physics.util.extend({}, defaults, options);

            this.el = el ? el : document.body;

            this.drawMeta = Physics.util.throttle( Physics.util.bind(this.drawMeta, this), this.options.metaRefresh );
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">bodies</span><span class="description">Array of bodies in the world (reference!)</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">meta</span><span class="description">meta object</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Render the world bodies and meta. Called by world.render()</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">render: function( bodies, meta ){

            var body
                ,view
                ,pos
                ;

            if (this.beforeRender){

                this.beforeRender();
            }

            this._world.publish({
                topic: 'beforeRender',
                renderer: this,
                bodies: bodies,
                stats: meta
            });

            if (this.options.meta){
                this.drawMeta( meta );
            }

            for ( var i = 0, l = bodies.length; i &lt; l; ++i ){
                
                body = bodies[ i ];
                view = body.view || ( body.view = this.createView(body.geometry) );

                if ( !body.hidden ){
                    this.drawBody( body, view );
                }
            }

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@abstract: </span><span class="string"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">geometry</span><span class="description">The geometry</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Mixed}</span><span class="description">Whatever the renderer needs to render the body.</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Create a view for the specified geometry</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">createView: function( geometry ){

            // example:
            // var el = document.createElement('div');
            // el.style.height = geometry.height + 'px';
            // el.style.width = geometry.width + 'px';
            // return el;
            throw 'You must overried the renderer.createView() method.';
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@abstract: </span><span class="string"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">meta</span><span class="description">The meta data</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Draw the meta data.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">drawMeta: function( meta ){
            
            // example:
            // this.els.fps.innerHTML = meta.fps.toFixed(2);
            // this.els.steps.innerHTML = meta.steps;
            throw 'You must overried the renderer.drawMeta() method.';
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@abstract: </span><span class="string"></span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">body</span><span class="description">The body</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">view</span><span class="description">The view</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Draw specified body using specified view</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">drawBody: function( body, view ){

            // example (pseudocode):
            // view.angle = body.state.angle
            // view.position = body.state.position
            throw 'You must overried the renderer.drawBody() method.';
        }

        
    });

}());

// ---
// inside: src/core/world.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>The world class</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">(function(){

    // bodies, behaviors, integrators, and renderers all need the setWorld method
    var setWorld = function( world ){

        if ( this.disconnect &amp;&amp; this._world ){
            this.disconnect( this._world );
        }

        this._world = world;

        if ( this.connect &amp;&amp; world ){
            this.connect( world );
        }
    };

    Physics.util.each('body,behavior,integrator,renderer'.split(','), function( key, val ){

        // add a setWorld method to all of these types
        Physics[ key ].mixin('setWorld', setWorld);
    });

    var execCallbacks = function execCallbacks( fns, scope, args ){
        
        var fn
            ,ret
            ,cb = function(){
                return execCallbacks( fns, scope, args );
            }
            ;

        while ( fn = fns.shift() ){

            ret = fn.apply(scope, args);

            if (ret &amp;&amp; ret.then){
                return ret.then( cb );
            }
        }
    };

    var defaults = {

        // default timestep
        timestep: 1000.0 / 160,
        // maximum number of iterations per step
        maxIPF: 16,
        webworker: false, // NOT YET IMPLEMENTED

        // default integrator
        integrator: 'verlet'
    };

    // begin world definitions</code></pre></div></div></div></article><article class="comment"><header><h1 id="World">World</h1><h5 class="subheader"><div class="label radius ctx-type">function</div>World()</h5></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">cfg</span><span class="description">(optional) Configuration options</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Function,Array}</span><span class="name">fn</span><span class="description">(optional) Callback function or array of callbacks called with &quot;this&quot; === world</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>World Constructor.</p>

<p>If called with an array of functions, and any functions <br />return a promise-like object, the remaining callbacks will <br />be called only when that promise is resolved.</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">var World = function World( cfg, fn ){

        // allow creation of world without &quot;new&quot;
        if (!(this instanceof World)){
            return new World( cfg, fn );
        }
        
        this.init( cfg, fn );
    };

    // extend pubsub
    World.prototype = Physics.util.extend({}, Physics.util.pubsub.prototype, {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">cfg</span><span class="description">(optional) Configuration options</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Function}</span><span class="name">fn</span><span class="description">(optional) Callback function or array of callbacks called with &quot;this&quot; === world</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialization</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">init: function( cfg, fn ){

            if ( Physics.util.isFunction( cfg ) || Physics.util.isArray( cfg ) ){
                fn = cfg;
                cfg = {};
            }

            this._stats = {
               // statistics (fps, etc)
               fps: 0,
               ipf: 0 
            }; 
            this._bodies = [];
            this._behaviors = [];
            this._integrator = null;
            this._renderer = null;
            this._paused = false;
            this._opts = {};
            this.initPubsub( this );

            // set options
            this.options( cfg || {} );

            // apply the callback function
            if ( Physics.util.isFunction( fn ) ){

                execCallbacks([ fn ], this, [this, Physics] );

            } else if ( Physics.util.isArray( fn ) ){

                execCallbacks(fn, this, [this, Physics] );
            }
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">cfg</span><span class="description">Config options to set</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Object,this}</span><span class="description">Options or this</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get or set options</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">options: function( cfg ){

            if (cfg){

                // extend the defaults
                Physics.util.extend(this._opts, defaults, cfg);
                // set timestep
                this.timeStep(this._opts.timestep);
                // add integrator
                this.add(Physics.integrator(this._opts.integrator));

                return this;
            }

            return Physics.util.clone(this._opts);
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object,Array}</span><span class="name">arg</span><span class="description">The thing to add, or array of things to add</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Multipurpose add method. Add one or many bodies, behaviors, integrators, renderers...</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">add: function( arg ){

            var i = 0
                ,len = arg &amp;&amp; arg.length || 0
                ,thing = len ? arg[ 0 ] : arg
                ,notify
                ;

            if ( !thing ){
                return this;
            }

            // we'll either cycle through an array
            // or just run this on the arg itself
            do {
                switch (thing.type){

                    case 'behavior':
                        this.addBehavior(thing);
                    break; // end behavior

                    case 'integrator':
                        this.integrator(thing);
                    break; // end integrator

                    case 'renderer':
                        this.renderer(thing);
                    break; // end renderer

                    case 'body':
                        this.addBody(thing);
                    break; // end body
                    
                    default:
                        throw 'Error: failed to add item of unknown type &quot;'+ thing.type +'&quot; to world';
                    // end default
                }

                // notify
                notify = {
                    topic: 'add:' + thing.type
                };

                notify[ thing.type ] = thing;

                this.publish( notify );

            } while ( ++i &lt; len &amp;&amp; (thing = arg[ i ]) );

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object,Array}</span><span class="name">arg</span><span class="description">The thing to remove, or array of things to remove</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Multipurpose remove method. Remove one or many bodies, behaviors, integrators, renderers...</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">remove: function( arg ){

            var i = 0
                ,len = arg &amp;&amp; arg.length || 0
                ,thing = len ? arg[ 0 ] : arg
                ,notify
                ;

            if ( !thing ){
                return this;
            }

            // we'll either cycle through an array
            // or just run this on the arg itself
            do {
                switch (thing.type){

                    case 'behavior':
                        this.removeBehavior(thing);
                    break; // end behavior

                    case 'integrator':
                        if (thing === this._integrator){
                            this.integrator( null );
                        }
                    break; // end integrator

                    case 'renderer':
                        if (thing === this._renderer){
                            this.renderer( null );
                        }
                    break; // end renderer

                    case 'body':
                        this.removeBody(thing);
                    break; // end body
                    
                    default:
                        throw 'Error: failed to remove item of unknown type &quot;'+ thing.type +'&quot; from world';
                    // end default
                }

                // notify
                notify = {
                    topic: 'add:' + thing.type
                };

                notify[ thing.type ] = thing;

                this.publish( notify );

            } while ( ++i &lt; len &amp;&amp; (thing = arg[ i ]) );

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">integrator</span><span class="description">Integrator instance to use</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this,Object}</span><span class="description">This or Integrator</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get or Set the integrator</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">integrator: function( integrator ){

            if ( integrator === undefined ){
                return this._integrator;
            }

            if ( this._integrator ){

                this._integrator.setWorld( null );
            }

            if ( integrator ){
                this._integrator = integrator;
                this._integrator.setWorld( this );
            }

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">renderer</span><span class="description">The renderer to set</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this,Object}</span><span class="description">This or Renderer</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get or Set renderer</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">renderer: function( renderer ){

            if (renderer === undefined){
                return this._renderer;
            }

            if ( this._renderer ){

                this._renderer.setWorld( null );
            }

            if (renderer){
                this._renderer = renderer;
                this._renderer.setWorld( this );
            }

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">dt</span><span class="description">The timestep size</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this,Number}</span><span class="description">This or the timestep</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get or Set timestep</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">timeStep: function( dt ){

            if ( dt ){

                this._dt = dt;
                // calculate the maximum jump in time over which to do iterations
                this._maxJump = dt * this._opts.maxIPF;

                return this;
            }

            return this._dt;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">behavior</span><span class="description">The behavior to add</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Add behavior to the world</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">addBehavior: function( behavior ){

            behavior.setWorld( this );
            this._behaviors.push( behavior );
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Array}</span><span class="description">Array of behaviors</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get copied list of behaviors in the world</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">getBehaviors: function(){

            // return the copied array
            return [].concat(this._behaviors);
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">behavior</span><span class="description">The behavior to remove</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Remove behavior from the world</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">removeBehavior: function( behavior ){

            var behaviors = this._behaviors
                ,notify
                ;

            if (behavior){
                
                for ( var i = 0, l = behaviors.length; i &lt; l; ++i ){
                    
                    if (behavior === behaviors[ i ]){
                        
                        behaviors.splice( i, 1 );
                        break;
                    }
                }

                // notify
                notify = {
                    topic: 'remove:behavior'
                };

                notify.behavior = behavior;

                this.publish( notify );
            }

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">body</span><span class="description">The body to add</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Add body to the world</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">addBody: function( body ){

            body.setWorld( this );
            this._bodies.push( body );
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Array}</span><span class="description">Array of bodies</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Get copied list of bodies in the world</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">getBodies: function(){

            // return the copied array
            return [].concat(this._bodies);
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">body</span><span class="description">The body to remove</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Remove body from the world</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">removeBody: function( body ){

            var bodies = this._bodies
                ,notify
                ;

            if (body){
                
                for ( var i = 0, l = bodies.length; i &lt; l; ++i ){
                    
                    if (body === bodies[ i ]){
                        
                        bodies.splice( i, 1 );
                        break;
                    }
                }

                // notify
                notify = {
                    topic: 'remove:body'
                };

                notify.body = body;

                this.publish( notify );
            }

            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">query</span><span class="description">The query</span></li><li class="tag"><span class="type">@return: </span><span class="types">{Object,false}</span><span class="description">Body or false if no match</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Find first matching body based on query parameters</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">findOne: function( query ){

            // @TODO: refactor to use a new Query object helper
            // @TODO: make $and the default. not $or.
            var list = {
                    check: function( arg ){
                        var fn = this;
                        while ( fn = fn.next ){

                            if ( fn( arg ) ){
                                return true;
                            }
                        }
                        return false;
                    }
                }
                ,test = list
                ,bodies = this._bodies
                ;

            // init tests
            if ( query.$within ){
                //aabb
            }
            if ( query.$at ){

                test.next = function( body ){

                    var aabb = body.aabb();
                    return Physics.aabb.contains( aabb, query.$at );
                };
            }

            // do search
            for ( var i = 0, l = bodies.length; i &lt; l; ++i ){
                
                if (list.check( bodies[ i ] )){
                    return bodies[ i ];
                }
            }

            return false;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">now</span><span class="description">Current unix timestamp</span></li><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Do a single step</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">step: function( now ){
            
            if ( this._paused ){

                this._time = false;
                return this;
            }

            var time = this._time || (this._time = now)
                ,diff = now - time
                ,stats = this._stats
                ,dt = this._dt
                ;

            if ( !diff ){
                return this;
            }
            
            // limit number of iterations in each step
            if ( diff &gt; this._maxJump ){

                this._time = now - this._maxJump;
                diff = this._maxJump;
            }

            // set some stats
            stats.fps = 1000/diff;
            stats.ipf = Math.ceil(diff/this._dt);

            while ( this._time &lt; now ){
                this._time += dt;
                this.iterate( dt );
            }

            this.publish({
                topic: 'step'
            });
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Render current world state using the renderer</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">render: function(){

            if ( !this._renderer ){
                throw &quot;No renderer added to world&quot;;
            }
            
            this._renderer.render( this._bodies, this._stats );
            this.publish({
                topic: 'render',
                bodies: this._bodies,
                stats: this._stats,
                renderer: this._renderer
            });
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Pause the world. (step calls do nothing)</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">pause: function(){

            this._paused = true;
            this.publish({
                topic: 'pause'
            });
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{this}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Unpause the world. (step calls continue as usual)</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">unpause: function(){

            this._paused = false;
            this.publish({
                topic: 'unpause'
            });
            return this;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{Boolean}</span><span class="description">Is the world paused?</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Determine if world is paused</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">isPaused: function(){

            return !!this._paused;
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Destroy the world.<br />(Bwahahahahaha!)</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">destroy: function(){

            var self = this;
            self.pause();
            // remove all listeners
            self.unsubscribe( true );
            // remove everything
            self.remove( self.getBodies() );
            self.remove( self.getBehaviors() );
            self.integrator( null );
            self.renderer( null );
        }

    });

    Physics.world = World;
    
}());

// ---
// inside: src/integrators/verlet.js

Physics.integrator('verlet', function( parent ){

    // for this integrator we need to know if the object has been integrated before
    // so let's add a mixin to bodies

    Physics.body.mixin({

        started: function( val ){
            if ( val !== undefined ){
                this._started = true;
            }

            return !!this._started;
        }
    });


    return {</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Object}</span><span class="name">options</span><span class="description">Configuration options</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Initialization</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">init: function( options ){

            // call parent init
            parent.init.call(this, options);
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">bodies</span><span class="description">Array of bodies to integrate</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">dt</span><span class="description">Timestep size</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Velocity integration</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">integrateVelocities: function( bodies, dt ){

            // half the timestep
            var dtdt = dt * dt
                ,drag = 1 - this.options.drag
                ,body = null
                ,state
                ;

            for ( var i = 0, l = bodies.length; i &lt; l; ++i ){

                body = bodies[ i ];
                state = body.state;

                // only integrate if the body isn't fixed
                if ( !body.fixed ){

                    // Inspired from https://github.com/soulwire/Coffee-Physics
                    // @licence MIT
                    // 
                    // v = x - ox
                    // x = x + (v + a * dt * dt)

                    // use the velocity in vel if the velocity has been changed manually
                    if (state.vel.equals( state.old.vel ) &amp;&amp; body.started()){
                            
                        // Get velocity by subtracting old position from curr position
                        state.vel.clone( state.pos ).vsub( state.old.pos );

                    } else {

                        state.old.pos.clone( state.pos ).vsub( state.vel );
                        // so we need to scale the value by dt so it 
                        // complies with other integration methods
                        state.vel.mult( dt );
                    }

                    // Apply &quot;air resistance&quot;.
                    if ( drag ){

                        state.vel.mult( drag );
                    }

                    // Apply acceleration
                    // v += a * dt * dt
                    state.vel.vadd( state.acc.mult( dtdt ) );

                    // normalize velocity 
                    state.vel.mult( 1/dt );

                    // store calculated velocity
                    state.old.vel.clone( state.vel );

                    // Reset accel
                    state.acc.zero();

                    //
                    // Angular components
                    // 

                    if (state.angular.vel === state.old.angular.vel &amp;&amp; body.started()){

                        state.angular.vel = (state.angular.pos - state.old.angular.pos);

                    } else {

                        state.old.angular.pos = state.angular.pos - state.angular.vel;
                        state.angular.vel *= dt;
                    }

                    state.angular.vel += state.angular.acc * dtdt;
                    state.angular.vel /= dt;
                    state.old.angular.vel = state.angular.vel;
                    state.angular.acc = 0;

                    body.started( true );

                } else {
                    // set the velocity and acceleration to zero!
                    state.vel.zero();
                    state.acc.zero();
                    state.angular.vel = 0;
                    state.angular.acc = 0;
                }
            }
        },</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@param: </span><span class="types">{Array}</span><span class="name">bodies</span><span class="description">Array of bodies to integrate</span></li><li class="tag"><span class="type">@param: </span><span class="types">{Number}</span><span class="name">dt</span><span class="description">Timestep size</span></li><li class="tag"><span class="type">@return: </span><span class="types">{void}</span><span class="description"></span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Position integration</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">integratePositions: function( bodies, dt ){

            // half the timestep
            var dtdt = dt * dt
                ,body = null
                ,state
                ;

            for ( var i = 0, l = bodies.length; i &lt; l; ++i ){

                body = bodies[ i ];
                state = body.state;

                // only integrate if the body isn't fixed
                if ( !body.fixed ){

                    // so we need to scale the value by dt so it 
                    // complies with other integration methods
                    state.vel.mult( dt );
                
                    // Store old position.
                    // xold = x
                    state.old.pos.clone( state.pos );

                    state.pos.vadd( state.vel );

                    // normalize velocity 
                    state.vel.mult( 1/dt );

                    // store calculated velocity
                    state.old.vel.clone( state.vel );

                    //
                    // Angular components
                    // 

                    
                    state.angular.vel *= dt;
                
                    state.old.angular.pos = state.angular.pos;

                    state.angular.pos += state.angular.vel;
                    state.angular.vel /= dt;
                    state.old.angular.vel = state.angular.vel;
                }
            }
        }
    };
});



// ---
// inside: src/geometries/point.js</code></pre></div></div></div></article><article class="comment"><header></header><ul class="no-bullet tags"><li class="tag"><span class="type">@module: </span><span class="string">geometries/point</span></li></ul><div data-section="accordian" data-options="one_up: false;" class="section-container code auto"><div class="section"><p data-section-title class="title"><a href="#">Description</a></p><div data-section-content class="content description"><p>Point geometry</p></div></div><div class="section"><p data-section-title class="title"><a href="#">Source</a></p><div data-section-content class="content"><pre><code class="language-javascript">Physics.geometry('point', function( parent ){

    // alias of default
});


// ---
// inside: src/outro.js

return Physics;
}));</code></pre></div></div></div></article></div></div><!-- Foundation JS--><script type="text/javascript">document.write('<script src=' +
('__proto__' in {} ? 'http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min' : 'http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min') +
'.js><\/script>')
</script><script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation.min.js"></script><script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/4.1.6/js/foundation/foundation.reveal.min.js"></script><!-- Prism js--><script type="text/javascript">
/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 * MIT license http://www.opensource.org/licenses/mit-license.php/
 * @author Lea Verou http://lea.verou.me
 */(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data),o);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar,l.language);t.hooks.run("before-insert",l);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r,i){return n.stringify(t.tokenize(e,r),i)},tokenize:function(e,n,r){var i=t.Token,s=[e],o=n.rest;if(o){for(var u in o)n[u]=o[u];delete n.rest}e:for(var u in n){if(!n.hasOwnProperty(u)||!n[u])continue;var a=n[u],f=a.inside,l=!!a.lookbehind,c=0;a=a.pattern||a;for(var h=0;h<s.length;h++){var p=s[h];if(s.length>e.length)break e;if(p instanceof i)continue;a.lastIndex=0;var d=a.exec(p);if(d){l&&(c=d[1].length);var v=d.index-1+c,d=d[0].slice(c),m=d.length,g=v+m,y=p.slice(0,v+1),b=p.slice(g+1),w=[h,1];y&&w.push(y);var E=new i(u,f?t.tokenize(d,f):d);w.push(E);b&&w.push(b);Array.prototype.splice.apply(s,w)}}}return s},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e,r,i){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(function(t){return n.stringify(t,r,e)}).join("");var s={type:e.type,content:n.stringify(e.content,r,i),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:i};s.type=="comment"&&(s.attributes.spellcheck="true");t.hooks.run("wrap",s);var o="";for(var u in s.attributes)o+=u+'="'+(s.attributes[u]||"")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'" '+o+">"+s.content+"</"+s.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();;
Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});;
Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});;
Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/ig,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/ig,inside:{punctuation:/\(/}}, number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});;
Prism.languages.coffeescript=Prism.languages.extend("javascript",{"block-comment":/([#]{3}\s*\r?\n(.*\s*\r*\n*)\s*?\r?\n[#]{3})/g,comment:/(\s|^)([#]{1}[^#^\r^\n]{2,}?(\r?\n|$))/g,keyword:/\b(this|window|delete|class|extends|namespace|extend|ar|let|if|else|while|do|for|each|of|return|in|instanceof|new|with|typeof|try|catch|finally|null|undefined|break|continue)\b/g});Prism.languages.insertBefore("coffeescript","keyword",{"function":{pattern:/[a-z|A-z]+\s*[:|=]\s*(\([.|a-z\s|,|:|{|}|\"|\'|=]*\))?\s*-&gt;/gi,inside:{"function-name":/[_?a-z-|A-Z-]+(\s*[:|=])| @[_?$?a-z-|A-Z-]+(\s*)| /g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g}},"attr-name":/[_?a-z-|A-Z-]+(\s*:)| @[_?$?a-z-|A-Z-]+(\s*)| /g});;
Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&amp;|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm});Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return)|(?=@for\s+\$[-_\w]+\s)+from/i});Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i});Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g});
;
</script><script type="text/javascript">
  var headerHeight = 64;

  $(document).foundation();

  $(function(){
    $('pre code').addClass('language-javascript');
  //   $('#nav > ul > li > a[href$="'+location.pathname.substring(location.pathname.lastIndexOf('/')+1, location.pathname.length)+'"]').parent().addClass('active');
  })</script></body></html>